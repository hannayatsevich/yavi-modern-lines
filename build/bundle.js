!function(e){var t={};function l(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=t,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(r,n,function(t){return e[t]}.bind(null,n));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=0)}([function(e,t,l){l(1),e.exports=l(5)},function(e,t,l){"use strict";var r=l(2),n=l(3),a=l(4);l(5);var o=new n.LinesModel(9,7,4,5),i=new a.LinesView;i.bindModel(o),o.bindView(i),(new r.LinesController).bindModelAndField(o,document.getElementById("playfield"))},function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinesController=function(){var e=this,t=null;e.bindModelAndField=function(l,r){t=l,r,window.addEventListener("resize",e.resizeInit),window.addEventListener("hashchange",e.hashchanged),document.getElementById("startBtn").addEventListener("click",e.start);var n=document.getElementById("openhighscore");n.addEventListener("click",e.showHighScore),n.addEventListener("touchstart",e.showHighScore);var a=document.getElementById("closehighscore");a.addEventListener("click",e.closeHighScore),a.addEventListener("touchstart",e.closeHighScore);var o=document.getElementById("undo");o.addEventListener("click",e.undo),o.addEventListener("touchstart",e.undo);var i=document.getElementById("opencustomsettings");i.addEventListener("click",e.showSettings),i.addEventListener("touchstart",e.showSettings);var s=document.getElementById("getcustomsettings");s.addEventListener("click",e.getSettings),s.addEventListener("touchstart",e.getSettings),document.getElementById("audiobutton").addEventListener("click",e.changeAudio),r.addEventListener("click",e.elemClick),window.addEventListener("beforeunload",e.befUnload),document.addEventListener("touchstart",e.tStart),document.addEventListener("touchend",e.tEnd);var u=document.getElementById("okgameover");u.addEventListener("click",e.closeGameOver),u.addEventListener("touchstart",e.closeGameOver)},e.hashchanged=function(e){t.hashchanged()},e.resizeInit=function(){t.resizeInit()},e.start=function(){t.start()},e.showHighScore=function(){t.switchToState("HighScore")},e.closeHighScore=function(){t.switchToState("Game")},e.undo=function(){t.undo()},e.showSettings=function(){t.switchToState("CustomSettings")},e.getSettings=function(){t.switchToState("Game")},e.changeAudio=function(){t.changeAudio()},e.elemClick=function(e){t.elemClick(e)},e.befUnload=function(e){t.befUnload(e)},e.tStart=function(e){t.tStart(e)},e.tEnd=function(e){t.tEnd(e)},e.closeGameOver=function(){t.switchToState("Game")}}},function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinesModel=function(e,t,l,r){var n,a=this,o=null;a.cellsNum=e,a.numOfColors=t,a.newBallsNumber=l,a.deleteMinimum=r,a.totalCellsNum=e*e,a.ballColors=["#81BF63","#F29B30","#BF0426","#1F818C","#FAE71B","#023859","#4AA2D9","#038C4C","#c154c1","#d36d51"],a.gameBallColors=[],a.ballMatrix=[],a.ballColorMatrix=[],a.currentScore=0;var i={ballMatrix:0,ballColorMatrix:0,numOfColors:0,deleteMinimum:0,cellsNum:0,currentScore:0,gameBallColors:0};a.ballChosen,a.newBallsArray=[],a.newBallsRadiusArray=[],a.deleteBallsArray=[],a.deleteBallsRadiusArray=[];var s,u,c,d,m,f,g,h,b,v,p,A,y,M,w=0,C=0,S=0,B=0,N=[],x={ball:0,previd:[],newid:[]},E=(i={ballMatrix:0,ballColorMatrix:0,numOfColors:0,deleteMinimum:0,cellsNum:0,currentScore:0,gameBallColors:0},"https://fe.it-academy.by/AjaxStringStorage2.php"),T="YATSEVICH_MODERN_LINES_RECORDS_TABLE";a.recordsTableArray;var O,R,I="",k=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},P=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){window.clearTimeout(e)};function L(e){if(null!=e.error)console.log(e.error);else if(""!=e.result){try{a.recordsTableArray=JSON.parse(e.result)}catch(e){console.log("Произошла ошибка"),console.log("Name "+e.name),console.log("Message "+e.message)}Array.isArray(a.recordsTableArray)||(a.recordsTableArray=[])}}function F(e,t,l){console.log(t+" "+l)}function G(e){null!=e.error&&alert(e.error)}function H(){if(P(S),S=0,a.deleteBallsRadiusArray[0]>=1){for(var e=0;e<a.deleteBallsArray.length;e++)if(a.deleteBallsRadiusArray[e]>=1){var t=a.deleteBallsRadiusArray[e]-1;a.deleteBallsRadiusArray[e]=t,o.updateBallRadius(a.deleteBallsArray[e],t)}S=k(H)}else{p=[];for(e=0;e<a.deleteBallsArray.length;e++)p[e]=a.deleteBallsArray[e];n=a.deleteBallsArray.length,a.currentScore+=n,o.updateCurrentScore(a.currentScore);for(e=0;e<a.deleteBallsArray.length;e++){var l=_(a.deleteBallsArray[e].id),r=D(a.deleteBallsArray[e].id);a.ballMatrix[l][r]=!1,a.ballColorMatrix[l][r]="",o.removeElem(a.deleteBallsArray[e])}a.deleteBallsArray=[],a.deleteBallsRadiusArray=[],setTimeout(z,300)}}function j(){var e=_(u.id),t=D(u.id);o.setCY(u,o.centerPointsArray[e][t][1])}function _(e){return parseInt(e.split("-")[0])}function D(e){return parseInt(e.split("-")[1])}function W(){(c+=f)<d&&(f=1,c=d),c>m&&(f=-1,c=m),o.setCY(u,c),P(w),w=0,w=k(W)}function Y(){for(var e=0,t=0;t<a.cellsNum;t++)for(var l=0;l<a.cellsNum;l++)!1===a.ballMatrix[t][l]&&e++;return e}function U(e,t,l,r){var n=[];if(function(e,t){for(var l=0,r=0;r<a.cellsNum;r++){N[r]=[];for(var n=0;n<a.cellsNum;n++)N[r][n]=-1}N[e][t]=l;do{for(var o=!1,i=0;i<N.length;i++)for(var s=0;s<N[i].length;s++)N[i][s]===l&&(o=!0,i>0&&!1===a.ballMatrix[i-1][s]&&-1===N[i-1][s]&&(N[i-1][s]=l+1),i+1<N.length&&!1===a.ballMatrix[i+1][s]&&-1===N[i+1][s]&&(N[i+1][s]=l+1),s>0&&!1===a.ballMatrix[i][s-1]&&-1===N[i][s-1]&&(N[i][s-1]=l+1),s+1<N.length&&!1===a.ballMatrix[i][s+1]&&-1===N[i][s+1]&&(N[i][s+1]=l+1));l++}while(o)}(e,t),-1!=N[l][r]){var o=[l,r];n.push([l,r]);for(var i=N[l][r];i>0;)i--,o[0]>0&&N[o[0]-1][o[1]]===i?(n.push([o[0]-1,o[1]]),o[0]-=1):o[1]>0&&N[o[0]][o[1]-1]===i?(n.push([o[0],o[1]-1]),o[1]-=1):o[0]+1<N.length&&N[o[0]+1][o[1]]===i?(n.push([o[0]+1,o[1]]),o[0]+=1):o[1]+1<N.length&&N[o[0]][o[1]+1]===i&&(n.push([o[0],o[1]+1]),o[1]+=1)}return n}function V(){if(P(B),B=0,g.length>0){var e=g.length-1,t=_(u.id),l=D(u.id),r=o.centerPointsArray[g[e][0]][g[e][1]][0],n=o.centerPointsArray[g[e][0]][g[e][1]][1];if(n>b?n<(b+=M)&&(b=n):n<b&&n>(b-=M)&&(b=n),r>h?r<(h+=M)&&(h=r):r<h&&r>(h-=M)&&(h=r),o.setCX(u,h),o.setCY(u,b),r===h&&n===b)if(1===g.length){x.ball=0,x.previd=[],x.newid=[],v=0,p=0;t=_(u.id),l=D(u.id);var i=a.ballColorMatrix[t][l];x.ball=u,x.previd=[t,l],a.ballMatrix[t][l]=!1,a.ballColorMatrix[t][l]="",u.id=g[e][0]+"-"+g[e][1],t=_(u.id),l=D(u.id),a.ballMatrix[t][l]=!0,a.ballColorMatrix[t][l]=i,x.newid=[t,l],u=0,g.pop(),function(){var e,t,l=X();l||(e=q());l||e||(t=J());l||e||t?H():a.createAndPlaceNextBalls()}()}else g.pop(),B=k(V);else B=k(V)}}function z(){var e,t,r=X();if(r||(e=q()),r||e||(t=J()),r)H();else if(e)H();else if(t)H();else{Y()<l&&a.switchToState("Gameover")}}function X(){for(var e=[],t=0;t<a.ballMatrix.length;t++){for(var l=0,r=0;r<a.ballMatrix[t].length;r++){var n="";if(a.ballMatrix[t][r]&&a.ballColorMatrix[t][r])if(r>0&&a.ballColorMatrix[t][r]===a.ballColorMatrix[t][r-1])n=t+"-"+r,e.push(n),l++;else{if(l>=a.deleteMinimum)break;l=0,(e=[]).push(n=t+"-"+r),l++}else if(l>=a.deleteMinimum)break}if(l>=a.deleteMinimum)break;e=[]}if(e.length>=a.deleteMinimum){a.deleteBallsArray=[],a.deleteBallsRadiusArray=[];for(t=0;t<e.length;t++){var o=document.getElementById(e[t]);a.deleteBallsArray.push(o),a.deleteBallsRadiusArray.push(A)}return!0}return!1}function q(){for(var e=[],t=0;t<a.ballMatrix.length;t++){for(var l=0,r=0;r<a.ballMatrix[t].length;r++){var n="";if(a.ballColorMatrix[r][t])if(r>0&&a.ballColorMatrix[r][t]===a.ballColorMatrix[r-1][t])n=r+"-"+t,e.push(n),l++;else{if(l>=a.deleteMinimum)break;l=0,(e=[]).push(n=r+"-"+t),l++}else if(l>=a.deleteMinimum)break}if(l>=a.deleteMinimum)break;e=[]}if(e.length>=a.deleteMinimum){a.deleteBallsArray=[],a.deleteBallsRadiusArray=[];for(t=0;t<e.length;t++){var i=document.getElementById(e[t]);a.deleteBallsArray.push(i),a.deleteBallsRadiusArray.push(o.ballR)}return!0}return!1}function J(){for(var e=[],t=0;t<a.cellsNum;t++){for(var l=0,r=0;r<a.cellsNum;r++){var n=r,o=(t+r*(a.cellsNum-1))%a.cellsNum,i="";if(a.ballColorMatrix[n][o])if(n-1>=0&&o+1<a.cellsNum&&a.ballColorMatrix[n][o]===a.ballColorMatrix[n-1][o+1])i=n+"-"+o,e.push(i),l++;else{if(l>=a.deleteMinimum)break;l=0,(e=[]).push(i=n+"-"+o),l++}else if(l>=a.deleteMinimum)break}if(l>=a.deleteMinimum)break;e=[]}if(e.length<a.deleteMinimum)for(t=0;t<a.cellsNum;t++){for(l=0,r=a.cellsNum-1;r>=0;r--){n=r,o=(a.cellsNum*(a.cellsNum-1)-1+t-(a.cellsNum-r)*(a.cellsNum-1))%a.cellsNum,i="";if(a.ballColorMatrix[n][o])if(n+1<a.cellsNum&&o-1>=0&&a.ballColorMatrix[n][o]===a.ballColorMatrix[n+1][o-1])i=n+"-"+o,e.push(i),l++;else{if(l>=a.deleteMinimum)break;l=0,(e=[]).push(i=n+"-"+o),l++}else if(l>=a.deleteMinimum)break}if(l>=a.deleteMinimum)break;e=[]}if(e.length<a.deleteMinimum)for(t=0;t<a.cellsNum;t++){for(l=0,r=0;r<a.cellsNum;r++){n=r,o=(t+r*(a.cellsNum+1))%a.cellsNum,i="";if(a.ballColorMatrix[n][o])if(n-1>=0&&o-1>=0&&a.ballColorMatrix[n][o]===a.ballColorMatrix[n-1][o-1])i=n+"-"+o,e.push(i),l++;else{if(l>=a.deleteMinimum)break;l=0,(e=[]).push(i=n+"-"+o),l++}else if(l>=a.deleteMinimum)break}if(l>=a.deleteMinimum)break;e=[]}if(e.length<a.deleteMinimum)for(t=0;t<a.cellsNum;t++){for(l=0,r=a.cellsNum-1;r>=0;r--){n=r,o=(a.cellsNum*(a.cellsNum-1)+1+t-(a.cellsNum-r)*(a.cellsNum+1))%a.cellsNum,i="";if(a.ballColorMatrix[n][o])if(n+1<a.cellsNum&&o+1<a.cellsNum&&a.ballColorMatrix[n][o]===a.ballColorMatrix[n+1][o+1])i=n+"-"+o,e.push(i),l++;else{if(l>=a.deleteMinimum)break;l=0,(e=[]).push(i=n+"-"+o),l++}else if(l>=a.deleteMinimum)break}if(l>=a.deleteMinimum)break;e=[]}if(e.length>=a.deleteMinimum){for(t=0;t<e.length;t++){var s=document.getElementById(e[t]);a.deleteBallsArray.push(s),a.deleteBallsRadiusArray.push(A)}return!0}return!1}a.refreshRecordsTable=function(){$.ajax({url:E,type:"POST",dataType:"json",data:{f:"READ",n:T},cache:!1,success:L,error:F})},a.refreshRecordsTable(),a.updateRecordsTableServer=function(){var e;e=Math.random(),$.ajax({url:E,type:"POST",cache:!1,dataType:"json",data:{f:"LOCKGET",n:T,p:e},success:function(t){if(null!=t.error)console.log(t.error);else{if(""!=t.result){try{a.recordsTableArray=JSON.parse(t.result)}catch(e){console.log("Произошла ошибка"),console.log("Name "+e.name),console.log("Message "+e.message)}Array.isArray(a.recordsTableArray)||(a.recordsTableArray=[])}if(I)for(var l=[a.currentScore,I],r=0;r<a.recordsTableArray.length;r++){if(a.currentScore<a.recordsTableArray[a.recordsTableArray.length-1][0]){a.recordsTableArray.push(l);break}if(a.currentScore>=a.recordsTableArray[r][0]){a.recordsTableArray.splice(r,0,l);break}}$.ajax({url:E,type:"POST",dataType:"json",data:{f:"UPDATE",n:T,v:JSON.stringify(a.recordsTableArray),p:e},cache:!1,success:G,error:F})}},error:F})},a.updateRecordsTableDOM=function(){setTimeout(o.updateRecordsTableDOM,1e3)},a.checkLocStorage=function(){var e,t=window.localStorage.getItem("MODERN_LINES");if(t)try{var l=JSON.parse(t),r=!0;0!==l.ballMatrix.length&&0!==l.ballColorMatrix.length&&0!==l.numOfColors.length&&0!==l.gameBallColors.length&&0!==l.deleteMinimum&&0!==l.cellsNum&&0!==l.numOfColors||(r=!1),r&&(a.ballMatrix=l.ballMatrix,a.ballColorMatrix=l.ballColorMatrix,a.numOfColors=l.numOfColors,o.setSettingsValues("colorsnumber",a.numOfColors),a.cellsNum=l.cellsNum,o.setSettingsValues("cellsnumber",a.cellsNum),a.deleteMinimum=l.deleteMinimum,o.setSettingsValues("cellsnumminimumremovalber",a.deleteMinimum),a.gameBallColors=l.gameBallColors,a.currentScore=l.currentScore,e=!0)}catch(e){console.log("Произошла ошибка"),console.log("Name "+e.name),console.log("Message "+e.message)}e?(a.resizeInit(),o.updateCurrentScore(a.currentScore)):a.createPlayField(),l={ballMatrix:0,ballColorMatrix:0,numOfColors:0,deleteMinimum:0,cellsNum:0,currentScore:0,gameBallColors:0}},a.bindView=function(e){o=e,a.updateRecordsTableDOM(),a.checkLocStorage(),a.hashchanged()},a.hashchanged=function(){var e=window.location.hash.substr(1);""===e&&(e="Game",a.switchToState(e)),"Game"===e&&(a.getSettings(),a.closeHighScore(),o.closeGameOver()),"HighScore"===e&&(a.showHighScore(),a.getSettings(),o.closeGameOver()),"CustomSettings"===e&&(a.showSettings(),a.closeHighScore(),o.closeGameOver()),"Gameover"===e&&(o.showGameOver(),a.getSettings(),a.closeHighScore())},a.switchToState=function(e){location.hash=e},a.createPlayField=function(){o&&o.createPlayField()},a.resizeInit=function(){o&&(s||(s=setTimeout((function(){s=null,o.resizeField()}),60)))},a.start=function(){o&&(a.generateGameColors(),a.clearArrForNewGame(),a.currentScore=0,o.updateCurrentScore(a.currentScore),o.start(),a.createAndPlaceNextBalls())},a.generateGameColors=function(){var e=0,l={};for(a.gameBallColors=[];a.gameBallColors.length<t;){var r=Math.floor(Math.random()*a.ballColors.length),n=a.ballColors[r];n in l||(l[n]=!0,a.gameBallColors[e]=n,e++)}},a.clearArrForNewGame=function(){for(var e=0;e<a.cellsNum;e++){a.ballMatrix[e]=[],a.ballColorMatrix[e]=[];for(var t=0;t<a.cellsNum;t++)a.ballMatrix[e][t]=!1,a.ballColorMatrix[e][t]=""}a.ballChosen=0},a.createAndPlaceNextBalls=function(){var e=function(e){for(var t=[],l=1;l<=e;l++){var r=Math.floor(Math.random()*a.gameBallColors.length),n=a.gameBallColors[r];t[l]=n}return t}(a.newBallsNumber),t=function(e){for(var t=[],l={},r=1;r<=e;){var n=Math.floor(Math.random()*a.totalCellsNum),o=Math.trunc(n/a.cellsNum),i=n-o*a.cellsNum;n in l||a.ballMatrix[o][i]||(l[n]=!0,t[r]={row:o,column:i},r++)}return t}(a.newBallsNumber);!function(e,t,l){a.newBallsArray=[],a.newBallsRadiusArray=[];for(var r=1;r<=e;r++){var n=l[r].row+"-"+l[r].column;a.ballMatrix[l[r].row][l[r].column]=!0,a.ballColorMatrix[l[r].row][l[r].column]=t[r],o.createBallAnim(t[r],o.centerPointsArray[l[r].row][l[r].column][0],o.centerPointsArray[l[r].row][l[r].column][1],A,n)}a.animateAppearance()}(a.newBallsNumber,e,t)},a.animateAppearance=function(){if(P(C),C=0,a.newBallsRadiusArray[0]<=A){for(var e=0;e<a.newBallsArray.length;e++)if(a.newBallsRadiusArray[e]<=A){var t=a.newBallsRadiusArray[e]+1;a.newBallsRadiusArray[e]=t,o.updateBallRadius(a.newBallsArray[e],t)}C=k(a.animateAppearance)}else{v=[];for(e=0;e<a.newBallsArray.length;e++)v[e]=a.newBallsArray[e];z()}},a.elemClick=function(e){var t=(e=e||window.event).target||e.srcElement;if(t.id)u&&j(),f=-1,u=t,c=o.getCY(u),d=c-.11*y,m=c+.11*y,W(),o.clickBallSound(),o.vibro();else if(u)if(Y()<a.newBallsNumber)a.switchToState("Gameover");else{var l=_(u.id),r=D(u.id),n=Math.round(t.getAttribute("y")/y),i=Math.round(t.getAttribute("x")/y);(g=U(l,r,n,i)).length>0&&(P(w),w=0,j(),h=o.getCX(u),b=o.getCY(u),V())}},a.undoStep=function(){if(0!=p){for(var e=0;e<p.length;e++){p[e].setAttribute("r",o.ballR);var t=_(p[e].id),l=D(p[e].id);a.ballColorMatrix[t][l]=p[e].getAttribute("fill"),a.ballMatrix[t][l]=!0,o.appendElem(p[e])}a.currentScore-=n,p=0}if(0!=v){for(e=0;e<v.length;e++){t=_(v[e].id),l=D(v[e].id);a.ballColorMatrix[t][l]="",a.ballMatrix[t][l]=!1,o.setR(v[e],0),o.removeElem(v[e])}v=0}0!=x.ball&&(x.ball.id=x.previd[0]+"-"+x.previd[1],a.ballColorMatrix[x.previd[0]][x.previd[1]]=x.ball.getAttribute("fill"),a.ballMatrix[x.previd[0]][x.previd[1]]=!0,o.setCY(x.ball,o.centerPointsArray[x.previd[0]][x.previd[1]][1]),o.setCX(x.ball,o.centerPointsArray[x.previd[0]][x.previd[1]][0]),a.ballColorMatrix[x.newid[0]][x.newid[1]]="",a.ballMatrix[x.newid[0]][x.newid[1]]=!1,x={ball:0,previd:[],newid:[]})},a.updateModel=function(){I=o.playerName,y=o.cellW,A=o.ballR,M=o.ballMovingSpeed},a.showHighScore=function(){o&&o.showHighScore()},a.closeHighScore=function(){o&&o.closeHighScore()},a.undo=function(){o&&o.undo()},a.showSettings=function(){o&&o.showCustomSettings()},a.getSettings=function(){var e=a.cellsNum,t=a.numOfColors,l=a.deleteMinimum;o&&(a.cellsNum=o.getSettingsValues("cellsnumber"),a.numOfColors=o.getSettingsValues("colorsnumber"),a.deleteMinimum=o.getSettingsValues("minimumremoval"),a.totalCellsNum=a.cellsNum*a.cellsNum,a.cellsNum==e&&a.numOfColors==t&&a.deleteMinimum==l||(o.deleteAllBalls(),a.clearArrForNewGame(),o.updateCurrentScore(a.currentScore),a.createPlayField()),o.closeCustomSettings())},a.changeAudio=function(){o.changeAudio()},a.befUnload=function(e){e=e||window.event,i.ballMatrix=a.ballMatrix,i.ballColorMatrix=a.ballColorMatrix,i.numOfColors=a.numOfColors,i.cellsNum=a.cellsNum,i.deleteMinimum=a.deleteMinimum,i.currentScore=a.currentScore,i.gameBallColors=a.gameBallColors;var t=JSON.stringify(i);window.localStorage.setItem("MODERN_LINES",t),i={ballMatrix:0,ballColorMatrix:0,numOfColors:0,deleteMinimum:0,cellsNum:0,currentScore:0,gameBallColors:0}},a.tStart=function(e){e=e||window.event,O=e.changedTouches[0]},a.tEnd=function(e){e=e||window.event,R=e.changedTouches[0];var t=Math.abs(O.pageX-R.pageX),l=Math.abs(O.pageY-R.pageY);(t>20||l>20)&&(t>l?R.pageX<O.pageX?a.showHighScore():a.showSettings():(R.pageY,O.pageY))},a.closeGameOver=function(){o.closeGameOver()}}},function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinesView=function(){var e,t,l,r=this,n=null;r.cellW,r.ballR;var a,o,i,s;r.ballMovingSpeed,r.centerPointsArray=[],r.playerName;var u=document.getElementById("playfield"),c="http://www.w3.org/2000/svg";function d(e,t,l,r,n){var a=document.createElementNS(c,"circle");a.setAttribute("cx",t),a.setAttribute("cy",l),a.setAttribute("r",r),a.setAttribute("fill",e),a.setAttribute("class","ball"),a.setAttribute("id",n),u.appendChild(a)}u.setAttribute("xmlns",c),u.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e=new Audio("sounds/bensound-theelevatorbossanova.mp3"),t=new Audio("sounds/ice-block-drop-02.mp3"),new Image("img/BUTTON-sound-on.png"),new Image("img/BUTTON-sound-off.png"),r.bindModel=function(e){n=e},r.updateRecordsTableDOM=function(){a=n.recordsTableArray;for(var e="",t=0;t<10;t++)e+=a[t][0]+" "+a[t][1]+"<br>";document.getElementById("insertupdatedrecords").innerHTML=e,document.getElementById("inserthighscore").innerHTML=a[0][0]},r.resizeField=function(){o=n.cellsNum,n.totalCellsNum,i=n.ballMatrix,s=n.ballColorMatrix,r.createPlayField(),r.deleteAllBalls(),r.placeSavedBalls()},r.createPlayField=function(){o=n.cellsNum,l=u.getBoundingClientRect().width,r.cellW=l/o,r.ballR=.35*r.cellW,r.ballMovingSpeed=.02*l,r.updateModel();var e=document.getElementById("cell"),t=document.createElementNS(c,"symbol");e?u.replaceChild(t,e):u.appendChild(t),t.setAttribute("id","cell");var a=document.createElementNS(c,"rect");a.setAttribute("x",0),a.setAttribute("y",0),a.setAttribute("width",r.cellW),a.setAttribute("height",r.cellW),a.setAttribute("fill","#BFB2A3"),t.appendChild(a);var i=document.createElementNS(c,"rect");i.setAttribute("x",.05*r.cellW),i.setAttribute("y",.05*r.cellW),i.setAttribute("width",.9*r.cellW),i.setAttribute("height",.9*r.cellW),i.setAttribute("fill","#D9D0C1"),t.appendChild(i);var s=document.getElementById("innerGroup"),d=document.createElementNS(c,"g");s?u.replaceChild(d,s):u.appendChild(d),d.setAttribute("id","innerGroup");var m=document.createElementNS(c,"rect");m.setAttribute("x",0),m.setAttribute("y",0),m.setAttribute("width",l),m.setAttribute("height",l),m.setAttribute("fill","#D9D0C1"),d.appendChild(m);var f,g,h=0,b=0;r.centerPointsArray=[];for(var v=0;v<o;v++){r.centerPointsArray[v]=[];for(var p=0;p<o;p++)b=r.cellW*v,h=r.cellW*p,d.insertAdjacentHTML("beforeend",'<use xlink:href="#cell" x='+h+" y="+b+" />"),r.centerPointsArray[v][p]=[],f=h+r.cellW/2,g=b+r.cellW/2,r.centerPointsArray[v][p][0]=f,r.centerPointsArray[v][p][1]=g}},r.deleteAllBalls=function(){for(var e=document.getElementsByClassName("ball");e[0];)e[0].parentNode.removeChild(e[0])},r.placeSavedBalls=function(){if(0!==i.length)for(var e=0;e<o;e++)for(var t=0;t<o;t++)if(i[e][t]){var l=e+"-"+t;d(s[e][t],r.centerPointsArray[e][t][0],r.centerPointsArray[e][t][1],r.ballR,l)}},r.start=function(){n.gameBallColors,i=n.ballMatrix,s=n.ballColorMatrix,n.currentScore,o=n.cellsNum,n.totalCellsNum,function(){r.deleteAllBalls();var e=document.getElementById("gameovershow");e&&e.setAttribute("id","gameover")}()},r.updateCurrentScore=function(e){document.getElementById("insertscore").textContent=e},r.createBallAnim=function(e,t,l,r,a){var o=document.createElementNS(c,"circle");o.setAttribute("cx",t),o.setAttribute("cy",l),o.setAttribute("fill",e),o.setAttribute("class","ball"),o.setAttribute("id",a),u.appendChild(o),n.newBallsArray.push(o),n.newBallsRadiusArray.push(0),n.newBallsArray,n.newBallsRadiusArray},r.appendElem=function(e){u.appendChild(e)},r.removeElem=function(e){e.parentNode.removeChild(e)},r.setCY=function(e,t){e.setAttribute("cy",t)},r.setCX=function(e,t){e.setAttribute("cx",t)},r.getCY=function(e){return parseInt(e.getAttribute("cy"))},r.getCX=function(e){return parseInt(e.getAttribute("cx"))},r.setR=function(e,t){e.setAttribute("r",t)},r.updateBallRadius=function(e,t){e.setAttribute("r",t)},r.clickBallSound=function(){t.currentTime=0,t.play()},r.vibro=function(){navigator.vibrate&&window.navigator.vibrate(50)},r.updateModel=function(){n&&n.updateModel()},r.showGameOver=function(){document.getElementById("insertgameoverscore").textContent="YOUR SCORE "+n.currentScore,document.getElementById("gameover").setAttribute("id","gameovershow")},r.closeGameOver=function(){var e,t=document.getElementById("gameovershow");t&&(t.setAttribute("id","gameover"),r.playerName=(e=document.getElementById("playername").value)?e=e.toString().split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;").split("'").join("&#039;"):e,r.updateModel(),n.updateRecordsTableServer(),setTimeout(n.updateRecordsTableDOM,500),r.deleteAllBalls(),n.clearArrForNewGame(),r.updateCurrentScore(0),r.createPlayField())},r.showHighScore=function(){document.getElementById("customsettingsshow")&&n.getSettings();var e=document.getElementById("highscore");e&&e.setAttribute("id","highscoreshow")},r.closeHighScore=function(){var e=document.getElementById("highscoreshow");e&&e.setAttribute("id","highscore")},r.undo=function(){document.getElementById("customsettingsshow")&&r.closeCustomSettings(),document.getElementById("highscoreshow")&&r.closeHighScore(),n.undoStep()},r.showCustomSettings=function(){document.getElementById("highscoreshow")&&r.closeHighScore();var e=document.getElementById("customsettings");e&&e.setAttribute("id","customsettingsshow")},r.getSettingsValues=function(e){for(var t,l=document.getElementsByName(e),r=0;r<l.length;r++)l[r].checked&&(t=l[r].value);return t},r.setSettingsValues=function(e,t){for(var l=document.getElementsByName(e),r=0;r<l.length;r++)l[r].value==t&&(l[r].checked=!0)},r.closeCustomSettings=function(){var e=document.getElementById("customsettingsshow");e&&e.setAttribute("id","customsettings")},r.changeAudio=function(){var t=document.getElementById("audioimg"),l=t.src;console.log(l),"https://yavi-modern-lines.web.app/img/BUTTON-sound-off.png"==l||"http://localhost:8080/img/BUTTON-sound-off.png"==l||"img/BUTTON-sound-off.png"==l?(t.src="img/BUTTON-sound-on.png",e.currentTime=0,e.play()):(t.src="img/BUTTON-sound-off.png",e.pause())}}},function(e,t){}]);
//# sourceMappingURL=bundle.js.map