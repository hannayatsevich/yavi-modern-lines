{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/index.js","webpack:///./src/js/LinesController.js","webpack:///./src/js/LinesModel.js","webpack:///./src/js/LinesView.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","modernLinesModel","LinesModel","modernLinesView","LinesView","bindModel","bindView","LinesController","bindModelAndField","document","getElementById","self","this","activeModel","model","field","window","addEventListener","resizeInit","hashchanged","start","showHSBtn","showHighScore","closeHSBtn","closeHighScore","undoBtn","undo","showCSBtn","showSettings","getSettingsBtn","getSettings","changeAudio","elemClick","befUnload","tStart","tEnd","gameoverBtn","closeGameOver","EO","switchToState","cellsNum","numOfColors","newBallsNumber","deleteMinimum","lastStepScore","activeView","totalCellsNum","ballColors","gameBallColors","ballMatrix","ballColorMatrix","currentScore","saveModel","ballChosen","newBallsArray","newBallsRadiusArray","deleteBallsArray","deleteBallsRadiusArray","resizeTimeout","ballChosenCY","ballChosenBorderUp","ballChosenBorderDown","ballSpeed","ballPath","ballMovingCX","ballMovingCY","lastBallsAppeared","lastBallsDeleted","ballR","cellW","ballMovingSpeed","ballJumpTimer","ballAppearanceTimer","ballDeleteTimer","ballMoveTimer","pathMatrix","lastBallChosen","ajaxHandlerScript","stringName","recordsTableArray","startSwipe","endSwipe","playerName","RAF","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","cRAF","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","clearTimeout","readReady","callresult","undefined","error","console","log","result","JSON","parse","message","Array","isArray","errorHandler","jqXHR","statusStr","errorStr","updateReady","alert","animateDelete","length","newRadius","updateBallRadius","updateCurrentScore","idRow","getRowByElemID","id","idColumn","getColumnByElemID","removeElem","checkAppearanceForDelete","stopJumpingBall","ballChosenRow","ballChosenColumn","setCY","centerPointsArray","idString","parseInt","split","ballClick","checkEmptyCells","count","j","getPathForMove","startX","startY","finishX","finishY","path","stepNum","exists","x","y","buildPathMatrix","currPosition","push","stepsNum","animateMove","ballPathElem","coordXStep","coordYStep","setCX","ball","previd","newid","ballChosenColor","pop","column","diag","row","checkRowForDelete","checkColumnForDelete","checkDiagonalForDelete","createAndPlaceNextBalls","checkForDelete","idForDelete","element","rowNum","columnNum","refreshRecordsTable","$","ajax","url","type","dataType","data","f","cache","success","updateRecordsTableServer","updatePassword","Math","random","newplayer","splice","v","stringify","updateRecordsTableDOM","checkLocStorage","mark","storageCheck","localStorage","getItem","check","setSettingsValues","createPlayField","view","stateStr","location","hash","substr","showGameOver","newState","resizeField","generateGameColors","clearArrForNewGame","colorNum","randomColor","floor","colorName","newBalls","number","colorsHash","nextBallsColor","newBallsPosition","positionsHash","randomPosition","trunc","nextBallsPlace","color","position","createBallAnim","animateAppearance","placeBalls","event","target","srcElement","getCY","clickBallSound","vibro","cellChosenRow","round","getAttribute","cellChosenColumn","getCX","undoStep","setAttribute","ballRow","ballColumn","appendElem","setR","updateModel","showCustomSettings","lastCellsNum","lastNumOfColors","lastDeleteMinimum","getSettingsValues","deleteAllBalls","closeCustomSettings","save","setItem","changedTouches","xAbs","abs","pageX","yAbs","pageY","clickAudio","clickAudio2","svgW","svgElem","nameSpace","createBall","cx","cy","circleElem","createElementNS","appendChild","Audio","Image","updInnerHtml","innerHTML","placeSavedBalls","getBoundingClientRect","width","cellElem","cellElemNew","replaceChild","rectElem","rectElem2","groupElem","groupElemNew","bgElem","centerPointX","centerPointY","coorX","coorY","insertAdjacentHTML","allBalls","getElementsByClassName","parentNode","removeChild","block","startGame","textContent","elem","currentTime","play","navigator","vibrate","text","toString","join","elemName","elemArray","getElementsByName","checked","num","imgElem","imgElemSrc","src","pause"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","'use strict';\nimport {LinesController} from './LinesController';\nimport {LinesModel} from './LinesModel';\nimport {LinesView} from './LinesView';\nimport '../styles/style.css';\n\nvar modernLinesModel = new LinesModel(9, 7, 4, 5);//cellsNum, numOfColors, newBallsNumber, deleteMinimum\nvar modernLinesView = new LinesView();\nmodernLinesView.bindModel(modernLinesModel);\nmodernLinesModel.bindView(modernLinesView);\nvar modernLinesController = new LinesController();\nmodernLinesController.bindModelAndField(modernLinesModel, document.getElementById('playfield'));","'use strict'\n\nexport function LinesController() {\n\tvar self = this;\n\tvar activeModel = null;\n\tvar activeField = null;\n\n\tself.bindModelAndField = function (model, field) {\n\t\tactiveModel = model;\n\t\tactiveField = field;\n\t\twindow.addEventListener('resize', self.resizeInit);\n\t\twindow.addEventListener('hashchange', self.hashchanged);\n\t\tvar startBtn = document.getElementById('startBtn');\n\t\tstartBtn.addEventListener('click', self.start);\n\t\tvar showHSBtn = document.getElementById('openhighscore');\n\t\tshowHSBtn.addEventListener('click', self.showHighScore);\n\t\tshowHSBtn.addEventListener('touchstart', self.showHighScore);\n\t\tvar closeHSBtn = document.getElementById('closehighscore');\n\t\tcloseHSBtn.addEventListener('click', self.closeHighScore);\n\t\tcloseHSBtn.addEventListener('touchstart', self.closeHighScore);\n\t\tvar undoBtn = document.getElementById('undo');\n\t\tundoBtn.addEventListener('click', self.undo);\n\t\tundoBtn.addEventListener('touchstart', self.undo);\n\t\tvar showCSBtn = document.getElementById('opencustomsettings');\n\t\tshowCSBtn.addEventListener('click', self.showSettings);\n\t\tshowCSBtn.addEventListener('touchstart', self.showSettings);\n\t\tvar getSettingsBtn = document.getElementById('getcustomsettings');\n\t\tgetSettingsBtn.addEventListener('click', self.getSettings);\n\t\tgetSettingsBtn.addEventListener('touchstart', self.getSettings);\n\t\tvar audioBtn = document.getElementById('audiobutton');\n\t\taudioBtn.addEventListener('click', self.changeAudio);\n\t\t//слушаем клик по полю\n\t\tfield.addEventListener('click', self.elemClick);\n\t\twindow.addEventListener('beforeunload', self.befUnload);\n\t\tdocument.addEventListener('touchstart', self.tStart);\n\t\tdocument.addEventListener('touchend', self.tEnd);\n\t\tvar gameoverBtn = document.getElementById('okgameover');\n\t\tgameoverBtn.addEventListener('click', self.closeGameOver);\n\t\tgameoverBtn.addEventListener('touchstart', self.closeGameOver);\n\t}\n\tvar x;\n\tself.hashchanged = function (EO) {\n\t\tactiveModel.hashchanged();\n\t};\n\tself.resizeInit = function () {\n\t\tactiveModel.resizeInit();\n\t};\n\tself.start = function () {\n\t\tactiveModel.start();\n\t};\n\tself.showHighScore = function () {\n\t\tactiveModel.switchToState(\"HighScore\");\n\t};\n\tself.closeHighScore = function () {\n\t\tactiveModel.switchToState(\"Game\");\n\t};\n\tself.undo = function () {\n\t\tactiveModel.undo();\n\t};\n\tself.showSettings = function () {\n\t\tactiveModel.switchToState(\"CustomSettings\");\n\t};\n\tself.getSettings = function () {\n\t\tactiveModel.switchToState(\"Game\");\n\t};\n\tself.changeAudio = function () {\n\t\tactiveModel.changeAudio();\n\t};\n\tself.elemClick = function (EO) {\n\t\tactiveModel.elemClick(EO);\n\t};\n\tself.befUnload = function (EO) {\n\t\tactiveModel.befUnload(EO);\n\t};\n\tself.tStart = function (EO) {\n\t\tactiveModel.tStart(EO);\n\t};\n\tself.tEnd = function (EO) {\n\t\tactiveModel.tEnd(EO);\n\t};\n\tself.closeGameOver = function () {\n\t\tactiveModel.switchToState(\"Game\");\n\t};\n};","'use strict'\n\nexport function LinesModel(cellsNum, numOfColors, newBallsNumber, deleteMinimum) {\n\tvar self = this;\n\tvar activeView = null;\n\n\tself.cellsNum = cellsNum;\n\tself.numOfColors = numOfColors;//количество цветов, с которыми будем работать\n\tself.newBallsNumber = newBallsNumber;\n\tself.deleteMinimum = deleteMinimum;\n\tself.totalCellsNum = cellsNum * cellsNum;\n\t//self.ballColors = ['#81BF63', '#F29B30', '#BF0426', '#4AA2D9', '#FAE71B', '#023859', '#96D9C6', '#038C4C', '#1F818C', '#F5A28B'];\n\tself.ballColors = ['#81BF63', '#F29B30', '#BF0426', '#1F818C', '#FAE71B', '#023859', '#4AA2D9', '#038C4C', '#c154c1', '#d36d51'];\n\tself.gameBallColors = [];//цвета, с которыми будем работать в конкретной игре\n\tself.ballMatrix = [];//массив с информацией, есть ли шар в клетке\n\tself.ballColorMatrix = [];//массив с информацией, какого цвета шар в клетке\n\tself.currentScore = 0;\n\tvar lastStepScore;\n\n\tvar saveModel = { \"ballMatrix\": 0, \"ballColorMatrix\": 0, \"numOfColors\": 0, \"deleteMinimum\": 0, \"cellsNum\": 0, \"currentScore\": 0, \"gameBallColors\": 0 };\n\tself.ballChosen;//последний выбранный шар\n\tself.newBallsArray = [];\n\tself.newBallsRadiusArray = [];\n\tself.deleteBallsArray = [];\n\tself.deleteBallsRadiusArray = [];\n\n\tvar ballJumpTimer = 0;//таймер движения шара при клике\n\tvar ballAppearanceTimer = 0;\n\tvar ballDeleteTimer = 0;\n\tvar ballMoveTimer = 0;\n\tvar resizeTimeout;\n\n\tvar pathMatrix = [];//массив точек маршрута от текущей точки в выбранную\n\tvar ballChosen;//последний выбранный шар\n\tvar ballChosenCY;//cy последнего выбранного шара\n\tvar ballChosenBorderUp;//верхняя граница движения шара для анимации при клике\n\tvar ballChosenBorderDown;//нижняя граница движения шара для анимации при клике\n\tvar ballSpeed;//скорость движения шара вверх-вниз при клике\n\tvar ballPath;\n\tvar ballMovingCX;\n\tvar ballMovingCY;\n\tvar rSpeed = 1;//шаг расширения радиуса шара при появлении\n\tvar lastBallsAppeared;\n\tvar lastBallChosen = { \"ball\": 0, \"previd\": [], \"newid\": [] };\n\n\tvar lastBallsDeleted;\n\tvar saveModel = { \"ballMatrix\": 0, \"ballColorMatrix\": 0, \"numOfColors\": 0, \"deleteMinimum\": 0, \"cellsNum\": 0, \"currentScore\": 0, \"gameBallColors\": 0 };\n\tvar locStorageName = \"MODERN_LINES\";\n\tvar ajaxHandlerScript = \"https://fe.it-academy.by/AjaxStringStorage2.php\";\n\tvar stringName = 'YATSEVICH_MODERN_LINES_RECORDS_TABLE';\n\tself.recordsTableArray;\n\n\tvar ballR;\n\tvar cellW;\n\tvar ballMovingSpeed;\n\tvar playerName = \"\";\n\n\tvar startSwipe;\n\tvar endSwipe;\n\n\t//кроссбраузерный таймер\n\tvar RAF = window.requestAnimationFrame ||\n\t\twindow.webkitRequestAnimationFrame ||\n\t\twindow.mozRequestAnimationFrame ||\n\t\twindow.oRequestAnimationFrame ||\n\t\twindow.msRequestAnimationFrame ||\n\t\t// ни один не доступен, будем работать просто по таймеру\n\t\tfunction (callback) { window.setTimeout(callback, 1000 / 60); };\n\tvar cRAF = window.cancelAnimationFrame ||\n\t\twindow.webkitCancelAnimationFrame ||\n\t\twindow.mozCancelAnimationFrame ||\n\t\twindow.oCancelAnimationFrame ||\n\t\twindow.msCancelAnimationFrame ||\n\t\t// ни один не доступен, будем работать просто по таймеру\n\t\tfunction (callback) { window.clearTimeout(callback); };\n\n\t//загружаем таблицу рекордов на страницу\n\tself.refreshRecordsTable = function () {\n\t\t$.ajax({\n\t\t\turl: ajaxHandlerScript,\n\t\t\ttype: 'POST', dataType: 'json',\n\t\t\tdata: { f: 'READ', n: stringName },\n\t\t\tcache: false,\n\t\t\tsuccess: readReady,\n\t\t\terror: errorHandler\n\t\t}\n\t\t);\n\t}\n\tfunction readReady(callresult) {\n\t\tif (callresult.error != undefined)\n\t\t\tconsole.log(callresult.error);\n\t\telse {\n\t\t\tif (callresult.result != \"\") {\n\t\t\t\ttry {\n\t\t\t\t\tself.recordsTableArray = JSON.parse(callresult.result);\n\t\t\t\t}\n\t\t\t\tcatch (error) {\n\t\t\t\t\tconsole.log('Произошла ошибка');\n\t\t\t\t\tconsole.log('Name ' + error.name);\n\t\t\t\t\tconsole.log('Message ' + error.message);\n\t\t\t\t};\n\t\t\t\tif (!Array.isArray(self.recordsTableArray))\n\t\t\t\t\tself.recordsTableArray = [];\n\t\t\t};\n\t\t};\n\t};\n\tfunction errorHandler(jqXHR, statusStr, errorStr) {\n\t\tconsole.log(statusStr + ' ' + errorStr);\n\t};\n\tself.refreshRecordsTable();\n\t//ф-я обновляем таблицу рекордов в модели\n\tself.updateRecordsTableServer = function () {\n\t\tvar updatePassword;\n\t\tupdatePassword = Math.random();\n\t\t$.ajax({\n\t\t\turl: ajaxHandlerScript, type: 'POST', cache: false, dataType: 'json',\n\t\t\tdata: { f: 'LOCKGET', n: stringName, p: updatePassword },\n\t\t\tsuccess: lockGetReady,\n\t\t\terror: errorHandler,\n\t\t}\n\t\t);\n\t\tfunction lockGetReady(callresult) {\n\t\t\tif (callresult.error != undefined)\n\t\t\t\tconsole.log(callresult.error);\n\t\t\telse {\n\t\t\t\tif (callresult.result != \"\") { // либо строка пустая, либо в строке - JSON-представление массива \n\t\t\t\t\ttry {\n\t\t\t\t\t\tself.recordsTableArray = JSON.parse(callresult.result);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (error) {\n\t\t\t\t\t\tconsole.log('Произошла ошибка');\n\t\t\t\t\t\tconsole.log('Name ' + error.name);\n\t\t\t\t\t\tconsole.log('Message ' + error.message);\n\t\t\t\t\t};\n\t\t\t\t\tif (!Array.isArray(self.recordsTableArray))\n\t\t\t\t\t\tself.recordsTableArray = [];\n\t\t\t\t};\n\n\t\t\t\tif (playerName) {\n\t\t\t\t\tvar newplayer = [self.currentScore, playerName];\n\t\t\t\t\tfor (var i = 0; i < self.recordsTableArray.length; i++) {\n\t\t\t\t\t\tif (self.currentScore < self.recordsTableArray[self.recordsTableArray.length - 1][0]) {\n\t\t\t\t\t\t\tself.recordsTableArray.push(newplayer);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (self.currentScore >= self.recordsTableArray[i][0]) {\n\t\t\t\t\t\t\tself.recordsTableArray.splice(i, 0, newplayer);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: ajaxHandlerScript,\n\t\t\t\t\ttype: 'POST', dataType: 'json',\n\t\t\t\t\tdata: { f: 'UPDATE', n: stringName, v: JSON.stringify(self.recordsTableArray), p: updatePassword },\n\t\t\t\t\tcache: false,\n\t\t\t\t\tsuccess: updateReady,\n\t\t\t\t\terror: errorHandler\n\t\t\t\t}\n\t\t\t\t);\n\t\t\t};\n\t\t};\n\t};\n\tfunction updateReady(callresult) {\n\t\tif (callresult.error != undefined)\n\t\t\talert(callresult.error);\n\t};\n\t//ф-я обновляем таблицу рекордов на экране\n\tself.updateRecordsTableDOM = function () {\n\t\tsetTimeout(activeView.updateRecordsTableDOM, 1000);\n\t};\n\t//ф-я проверяем localstorage\n\tself.checkLocStorage = function () {\n\t\tvar mark;\n\t\tvar storageCheck = window.localStorage.getItem(locStorageName);\n\t\tif (storageCheck) {\n\t\t\ttry {\n\t\t\t\tvar saveModel = JSON.parse(storageCheck);\n\t\t\t\tvar check = true;\n\t\t\t\tif (saveModel.ballMatrix.length === 0 || saveModel.ballColorMatrix.length === 0 || saveModel.numOfColors.length === 0 || saveModel.gameBallColors.length === 0 || saveModel.deleteMinimum === 0 || saveModel.cellsNum === 0 || saveModel.numOfColors === 0) {\n\t\t\t\t\tcheck = false\n\t\t\t\t};\n\t\t\t\tif (check) {\n\t\t\t\t\tself.ballMatrix = saveModel.ballMatrix\n\t\t\t\t\tself.ballColorMatrix = saveModel.ballColorMatrix;\n\t\t\t\t\tself.numOfColors = saveModel.numOfColors;\n\t\t\t\t\tactiveView.setSettingsValues('colorsnumber', self.numOfColors);\n\t\t\t\t\tself.cellsNum = saveModel.cellsNum;\n\t\t\t\t\tactiveView.setSettingsValues('cellsnumber', self.cellsNum);\n\t\t\t\t\tself.deleteMinimum = saveModel.deleteMinimum;\n\t\t\t\t\tactiveView.setSettingsValues('cellsnumminimumremovalber', self.deleteMinimum);\n\t\t\t\t\tself.gameBallColors = saveModel.gameBallColors;\n\t\t\t\t\tself.currentScore = saveModel.currentScore;\n\t\t\t\t\tmark = true;\n\t\t\t\t};\n\t\t\t}\n\t\t\tcatch (error) {\n\t\t\t\tconsole.log('Произошла ошибка');\n\t\t\t\tconsole.log('Name ' + error.name);\n\t\t\t\tconsole.log('Message ' + error.message);\n\t\t\t};\n\t\t};\n\t\tif (mark) {\n\t\t\t//если есть данные в localstorage, то восстанавливаем их\n\t\t\tself.resizeInit();\n\t\t\tactiveView.updateCurrentScore(self.currentScore);\n\t\t}\n\t\telse {\n\t\t\t//иначе инициируем первоначальное поле\n\t\t\tself.createPlayField();\n\t\t};\n\t\tsaveModel = { \"ballMatrix\": 0, \"ballColorMatrix\": 0, \"numOfColors\": 0, \"deleteMinimum\": 0, \"cellsNum\": 0, \"currentScore\": 0, \"gameBallColors\": 0 };\n\t}\n\t//связать со View - запустить проверку locstorage и нарисовать чистое поле или прошлую игру\n\tself.bindView = function (view) {\n\t\tactiveView = view;\n\t\tself.updateRecordsTableDOM();\n\t\tself.checkLocStorage();\n\t\tself.hashchanged();\n\t};\n\tself.hashchanged = function () {\n\t\tvar URLHash = window.location.hash;\n\t\tvar stateStr = URLHash.substr(1);\n\t\tif (stateStr === \"\") {\n\t\t\tstateStr = \"Game\";\n\t\t\tself.switchToState(stateStr);\n\t\t};\n\t\tif (stateStr === \"Game\") {\n\t\t\tself.getSettings();\n\t\t\tself.closeHighScore();\n\t\t\tactiveView.closeGameOver();\n\t\t};\n\t\tif (stateStr === \"HighScore\") {\n\t\t\tself.showHighScore();\n\t\t\tself.getSettings();\n\t\t\tactiveView.closeGameOver();\n\t\t};\n\t\tif (stateStr === \"CustomSettings\") {\n\t\t\tself.showSettings();\n\t\t\tself.closeHighScore();\n\t\t\tactiveView.closeGameOver();\n\t\t};\n\t\tif (stateStr === \"Gameover\") {\n\t\t\tactiveView.showGameOver();\n\t\t\tself.getSettings();\n\t\t\tself.closeHighScore();\n\t\t};\n\t};\n\tself.switchToState = function (newState) {\n\t\tlocation.hash = newState;\n\t};\n\tself.createPlayField = function () {\n\t\tif (activeView) {\n\t\t\tactiveView.createPlayField();\n\t\t};\n\t};\n\tself.resizeInit = function () {\n\t\tif (activeView)\n\t\t\tif (!resizeTimeout) {\n\t\t\t\tresizeTimeout = setTimeout(function () {\n\t\t\t\t\tresizeTimeout = null;\n\t\t\t\t\tactiveView.resizeField();\n\t\t\t\t}, 60);\n\t\t\t};\n\t};\n\t//начать игру\n\tself.start = function () {\n\t\tif (activeView) {\n\t\t\tself.generateGameColors();\n\t\t\tself.clearArrForNewGame();\n\t\t\tself.currentScore = 0;\n\t\t\tactiveView.updateCurrentScore(self.currentScore);\n\t\t\tactiveView.start();\n\t\t\t//помещаем на поле первые шары\n\t\t\tself.createAndPlaceNextBalls();\n\t\t};\n\t};\n\t//определяем цвета, с которыми будем работать в этой игре\n\tself.generateGameColors = function () {\n\t\tvar colorNum = 0;\n\t\tvar check = {};\n\t\tself.gameBallColors = []\n\t\twhile (self.gameBallColors.length < numOfColors) {\n\t\t\tvar randomColor = Math.floor(Math.random() * (self.ballColors.length));\n\t\t\tvar colorName = self.ballColors[randomColor];\n\t\t\tif (!(colorName in check)) {\n\t\t\t\tcheck[colorName] = true;\n\t\t\t\tself.gameBallColors[colorNum] = colorName;\n\t\t\t\tcolorNum++;\n\t\t\t};\n\t\t};\n\t};\n\t//ф-я очищаем сохраненные значения - заполняем матрицу шаров значениями false и матрицу цветов значениями '' ?????? все значения предыдущей игры\n\tself.clearArrForNewGame = function () {\n\t\tfor (var i = 0; i < self.cellsNum; i++) {\n\t\t\tself.ballMatrix[i] = [];\n\t\t\tself.ballColorMatrix[i] = [];\n\t\t\tfor (var j = 0; j < self.cellsNum; j++) {\n\t\t\t\tself.ballMatrix[i][j] = false;\n\t\t\t\tself.ballColorMatrix[i][j] = '';\n\t\t\t};\n\t\t};\n\t\tself.ballChosen = 0;\n\t};\n\t//ф-я совмещаем три след ф-ии - цвет + место + размещение\n\tself.createAndPlaceNextBalls = function () {\n\t\tvar newBalls = nextBallsColor(self.newBallsNumber);\n\t\tvar newBallsPosition = nextBallsPlace(self.newBallsNumber);\n\t\tplaceBalls(self.newBallsNumber, newBalls, newBallsPosition);\n\t};\n\t//ф-я генерируем нужное количество цветов из доступных\n\tfunction nextBallsColor(number) {\n\t\tvar colorsHash = [];\n\t\tfor (var i = 1; i <= number; i++) {\n\t\t\tvar randomColor = Math.floor(Math.random() * (self.gameBallColors.length));\n\t\t\tvar colorName = self.gameBallColors[randomColor];\n\t\t\tcolorsHash[i] = colorName;\n\t\t};\n\t\treturn colorsHash;\n\t};\n\t//ф-я генерируем нужное количество мест для расположения шаров\n\tfunction nextBallsPlace(number) {\n\t\tvar positionsHash = [];\n\t\tvar check = {};\n\t\tvar count = 1;\n\t\twhile (count <= number) {\n\t\t\tvar randomPosition = Math.floor(Math.random() * (self.totalCellsNum));\n\t\t\tvar row = Math.trunc(randomPosition / self.cellsNum);\n\t\t\tvar column = randomPosition - row * self.cellsNum;\n\t\t\tif (!(randomPosition in check) && !self.ballMatrix[row][column]) {\n\t\t\t\tcheck[randomPosition] = true;\n\t\t\t\tpositionsHash[count] = { 'row': row, 'column': column };\n\t\t\t\tcount++;\n\t\t\t};\n\t\t};\n\t\treturn positionsHash;\n\t};\n\t//ф-я размещаем новые шары на поле с анимацией\n\tfunction placeBalls(number, color, position) {\n\t\tself.newBallsArray = [];\n\t\tself.newBallsRadiusArray = [];\n\t\tfor (var i = 1; i <= number; i++) {\n\t\t\tvar id = '' + position[i].row + '-' + position[i].column;\n\t\t\tself.ballMatrix[position[i].row][position[i].column] = true;\n\t\t\tself.ballColorMatrix[position[i].row][position[i].column] = color[i];\n\t\t\tactiveView.createBallAnim(color[i], activeView.centerPointsArray[position[i].row][position[i].column][0], activeView.centerPointsArray[position[i].row][position[i].column][1], ballR, id)\n\t\t};\n\t\tself.animateAppearance();\n\t};\n\t//ф-я анимация появления шаров\n\tself.animateAppearance = function () {\n\t\tcRAF(ballAppearanceTimer);\n\t\tballAppearanceTimer = 0;\n\t\tif (self.newBallsRadiusArray[0] <= ballR) {\n\t\t\tfor (var i = 0; i < self.newBallsArray.length; i++) {\n\t\t\t\tif (self.newBallsRadiusArray[i] <= ballR) {\n\t\t\t\t\tvar newRadius = self.newBallsRadiusArray[i] + rSpeed;\n\t\t\t\t\tself.newBallsRadiusArray[i] = newRadius;\n\t\t\t\t\tactiveView.updateBallRadius(self.newBallsArray[i], newRadius);\n\t\t\t\t};\n\t\t\t};\n\t\t\tballAppearanceTimer = RAF(self.animateAppearance);\n\t\t}\n\t\telse {\n\t\t\tlastBallsAppeared = [];\n\t\t\tfor (var i = 0; i < self.newBallsArray.length; i++) {\n\t\t\t\tlastBallsAppeared[i] = self.newBallsArray[i];\n\t\t\t};\n\t\t\tcheckAppearanceForDelete();\n\t\t};\n\t};\n\t//ф-я анимация удаления шаров\n\tfunction animateDelete() {\n\t\tcRAF(ballDeleteTimer);\n\t\tballDeleteTimer = 0;\n\t\tif (self.deleteBallsRadiusArray[0] >= 0 + rSpeed) {\n\t\t\tfor (var i = 0; i < self.deleteBallsArray.length; i++) {\n\t\t\t\tif (self.deleteBallsRadiusArray[i] >= 0 + rSpeed) {\n\t\t\t\t\tvar newRadius = self.deleteBallsRadiusArray[i] - rSpeed;\n\t\t\t\t\tself.deleteBallsRadiusArray[i] = newRadius;\n\t\t\t\t\tactiveView.updateBallRadius(self.deleteBallsArray[i], newRadius);\n\t\t\t\t};\n\t\t\t};\n\t\t\tballDeleteTimer = RAF(animateDelete);\n\t\t}\n\t\telse {\n\t\t\tlastBallsDeleted = [];\n\t\t\tfor (var i = 0; i < self.deleteBallsArray.length; i++) {\n\t\t\t\tlastBallsDeleted[i] = self.deleteBallsArray[i];\n\t\t\t};\n\t\t\tlastStepScore = self.deleteBallsArray.length;\n\t\t\tself.currentScore += lastStepScore;\n\t\t\tactiveView.updateCurrentScore(self.currentScore);\n\t\t\tfor (var i = 0; i < self.deleteBallsArray.length; i++) {\n\t\t\t\tvar idRow = getRowByElemID(self.deleteBallsArray[i].id);\n\t\t\t\tvar idColumn = getColumnByElemID(self.deleteBallsArray[i].id);\n\t\t\t\tself.ballMatrix[idRow][idColumn] = false;\n\t\t\t\tself.ballColorMatrix[idRow][idColumn] = \"\";\n\t\t\t\tactiveView.removeElem(self.deleteBallsArray[i]);\n\t\t\t};\n\t\t\tself.deleteBallsArray = [];\n\t\t\tself.deleteBallsRadiusArray = [];\n\t\t\tsetTimeout(checkAppearanceForDelete, 300);\n\t\t};\n\t};\n\tself.elemClick = function (EO) {\n\t\tEO = EO || window.event;\n\t\tvar element = EO.target || EO.srcElement;\n\t\tvar elementID = element.id;\n\t\t//если нажали на шар, то он начинает двигаться\n\t\tif (elementID) {\n\t\t\tif (ballChosen) {\n\t\t\t\tstopJumpingBall();\n\t\t\t};\n\t\t\tballSpeed = -1;\n\t\t\tballChosen = element;\n\t\t\tballChosenCY = activeView.getCY(ballChosen);\n\t\t\tballChosenBorderUp = ballChosenCY - cellW * 0.11;\n\t\t\tballChosenBorderDown = ballChosenCY + cellW * 0.11;\n\t\t\tballClick();\n\t\t\tactiveView.clickBallSound();\n\t\t\tactiveView.vibro();\n\t\t}\n\t\telse {\n\t\t\tif (ballChosen) {\n\t\t\t\tvar emptyCells = checkEmptyCells();\n\t\t\t\tif (emptyCells < self.newBallsNumber) {\n\t\t\t\t\tself.switchToState(\"Gameover\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar ballChosenRow = getRowByElemID(ballChosen.id);\n\t\t\t\t\tvar ballChosenColumn = getColumnByElemID(ballChosen.id);\n\t\t\t\t\tvar cellChosenRow = Math.round(element.getAttribute('y') / cellW);\n\t\t\t\t\tvar cellChosenColumn = Math.round(element.getAttribute('x') / cellW);\n\t\t\t\t\tballPath = getPathForMove(ballChosenRow, ballChosenColumn, cellChosenRow, cellChosenColumn);\n\t\t\t\t\tif (ballPath.length > 0) {\n\t\t\t\t\t\tcRAF(ballJumpTimer);\n\t\t\t\t\t\tballJumpTimer = 0;\n\t\t\t\t\t\tstopJumpingBall();\n\t\t\t\t\t\tballMovingCX = activeView.getCX(ballChosen);\n\t\t\t\t\t\tballMovingCY = activeView.getCY(ballChosen);\n\t\t\t\t\t\tanimateMove();\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t};\n\t//ф-я остановки прыгающего шара в центр и зануления переменной выбранного мяча\n\tfunction stopJumpingBall() {\n\t\tvar ballChosenRow = getRowByElemID(ballChosen.id);\n\t\tvar ballChosenColumn = getColumnByElemID(ballChosen.id);\n\t\tactiveView.setCY(ballChosen, activeView.centerPointsArray[ballChosenRow][ballChosenColumn][1]);\n\t};\n\t//ф-я получить номер строки из Id\n\tfunction getRowByElemID(idString) {\n\t\tvar idRow = parseInt(idString.split('-')[0]);\n\t\treturn idRow;\n\t};\n\t//ф-я получить номер столбца из Id\n\tfunction getColumnByElemID(idString) {\n\t\tvar idColumn = parseInt(idString.split('-')[1]);\n\t\treturn idColumn;\n\t};\n\t//ф-я анимация движения шара при клике\n\tfunction ballClick() {\n\t\tballChosenCY += ballSpeed;\n\t\tif (ballChosenCY < ballChosenBorderUp) {\n\t\t\tballSpeed = 1;\n\t\t\tballChosenCY = ballChosenBorderUp;\n\t\t};\n\t\tif (ballChosenCY > ballChosenBorderDown) {\n\t\t\tballSpeed = -1;\n\t\t\tballChosenCY = ballChosenBorderDown;\n\t\t};\n\t\tactiveView.setCY(ballChosen, ballChosenCY);\n\t\tcRAF(ballJumpTimer);\n\t\tballJumpTimer = 0;\n\t\tballJumpTimer = RAF(ballClick);\n\t};\n\t//проверить, есть ли пустые клетки\t\n\tfunction checkEmptyCells() {\n\t\tvar count = 0;\n\t\tfor (var i = 0; i < self.cellsNum; i++) {\n\t\t\tfor (var j = 0; j < self.cellsNum; j++) {\n\t\t\t\tif (self.ballMatrix[i][j] === false) {\n\t\t\t\t\tcount++;\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t\treturn count;\n\t};\n\t//ф-я получаем путь из начальной точкив конечную\n\tfunction getPathForMove(startX, startY, finishX, finishY) {\n\t\tvar path = [];\n\t\t//строим строим карту возможных путей из стартовой точки\n\t\tbuildPathMatrix(startX, startY);\n\t\tif (pathMatrix[finishX][finishY] != -1) {\n\t\t\tvar currPosition = [finishX, finishY];\n\t\t\tpath.push([finishX, finishY]);\n\t\t\tvar stepsNum = pathMatrix[finishX][finishY];\n\t\t\twhile (stepsNum > 0) {\n\t\t\t\tstepsNum--;\n\t\t\t\tif (currPosition[0] > 0 && pathMatrix[currPosition[0] - 1][currPosition[1]] === stepsNum) {\n\t\t\t\t\tpath.push([currPosition[0] - 1, currPosition[1]]);\n\t\t\t\t\tcurrPosition[0] -= 1\n\t\t\t\t}\n\t\t\t\telse if (currPosition[1] > 0 && pathMatrix[currPosition[0]][currPosition[1] - 1] === stepsNum) {\n\t\t\t\t\tpath.push([currPosition[0], currPosition[1] - 1]);\n\t\t\t\t\tcurrPosition[1] -= 1\n\t\t\t\t}\n\t\t\t\telse if (currPosition[0] + 1 < pathMatrix.length && pathMatrix[currPosition[0] + 1][currPosition[1]] === stepsNum) {\n\t\t\t\t\tpath.push([currPosition[0] + 1, currPosition[1]]);\n\t\t\t\t\tcurrPosition[0] += 1\n\t\t\t\t}\n\t\t\t\telse if (currPosition[1] + 1 < pathMatrix.length && pathMatrix[currPosition[0]][currPosition[1] + 1] === stepsNum) {\n\t\t\t\t\tpath.push([currPosition[0], currPosition[1] + 1]);\n\t\t\t\t\tcurrPosition[1] += 1\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t\treturn path;\n\t};\n\t//ф-я строим карту возможных путей\n\t//x - номер строки, y - номер столбца\n\tfunction buildPathMatrix(startX, startY) {\n\t\tvar stepNum = 0;\n\t\tfor (var i = 0; i < self.cellsNum; i++) {\n\t\t\tpathMatrix[i] = [];\n\t\t\tfor (var j = 0; j < self.cellsNum; j++) {\n\t\t\t\tpathMatrix[i][j] = -1;\n\t\t\t};\n\t\t};\n\t\tpathMatrix[startX][startY] = stepNum;\n\t\tdo {\n\t\t\tvar exists = false;\n\t\t\tfor (var x = 0; x < pathMatrix.length; x++) {\n\t\t\t\tfor (var y = 0; y < pathMatrix[x].length; y++) {\n\t\t\t\t\tif (pathMatrix[x][y] === stepNum) {\n\t\t\t\t\t\texists = true;\n\t\t\t\t\t\tif (x > 0 && self.ballMatrix[x - 1][y] === false && pathMatrix[x - 1][y] === -1) {\n\t\t\t\t\t\t\tpathMatrix[x - 1][y] = stepNum + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (x + 1 < pathMatrix.length && self.ballMatrix[x + 1][y] === false && pathMatrix[x + 1][y] === -1) {\n\t\t\t\t\t\t\tpathMatrix[x + 1][y] = stepNum + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (y > 0 && self.ballMatrix[x][y - 1] === false && pathMatrix[x][y - 1] === -1) {\n\t\t\t\t\t\t\tpathMatrix[x][y - 1] = stepNum + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (y + 1 < pathMatrix.length && self.ballMatrix[x][y + 1] === false && pathMatrix[x][y + 1] === -1) {\n\t\t\t\t\t\t\tpathMatrix[x][y + 1] = stepNum + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tstepNum++;\n\t\t}\n\t\twhile (exists)\n\t}\n\t//ф-я анимация движения выбранного шара\n\tfunction animateMove() {\n\t\tcRAF(ballMoveTimer);\n\t\tballMoveTimer = 0;\n\t\tif (ballPath.length > 0) {\n\t\t\tvar ballPathElem = ballPath.length - 1;\n\t\t\tvar ballChosenRow = getRowByElemID(ballChosen.id);\n\t\t\tvar ballChosenColumn = getColumnByElemID(ballChosen.id);\n\t\t\tvar coordXStep = activeView.centerPointsArray[ballPath[ballPathElem][0]][ballPath[ballPathElem][1]][0];\n\t\t\tvar coordYStep = activeView.centerPointsArray[ballPath[ballPathElem][0]][ballPath[ballPathElem][1]][1];\n\t\t\tif (coordYStep > ballMovingCY) {\n\t\t\t\tballMovingCY += ballMovingSpeed;\n\t\t\t\tif (coordYStep < ballMovingCY) {\n\t\t\t\t\tballMovingCY = coordYStep;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (coordYStep < ballMovingCY) {\n\t\t\t\tballMovingCY -= ballMovingSpeed;\n\t\t\t\tif (coordYStep > ballMovingCY) {\n\t\t\t\t\tballMovingCY = coordYStep;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (coordXStep > ballMovingCX) {\n\t\t\t\tballMovingCX += ballMovingSpeed;\n\t\t\t\tif (coordXStep < ballMovingCX) {\n\t\t\t\t\tballMovingCX = coordXStep;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (coordXStep < ballMovingCX) {\n\t\t\t\tballMovingCX -= ballMovingSpeed;\n\t\t\t\tif (coordXStep > ballMovingCX) {\n\t\t\t\t\tballMovingCX = coordXStep;\n\t\t\t\t}\n\t\t\t}\n\t\t\tactiveView.setCX(ballChosen, ballMovingCX);\n\t\t\tactiveView.setCY(ballChosen, ballMovingCY);\n\t\t\tif (coordXStep === ballMovingCX && coordYStep === ballMovingCY) {\n\t\t\t\tif (ballPath.length === 1) {\n\n\t\t\t\t\tlastBallChosen.ball = 0;\n\t\t\t\t\tlastBallChosen.previd = [];\n\t\t\t\t\tlastBallChosen.newid = [];\n\t\t\t\t\tlastBallsAppeared = 0;\n\t\t\t\t\tlastBallsDeleted = 0;\n\n\t\t\t\t\tvar ballChosenRow = getRowByElemID(ballChosen.id);\n\t\t\t\t\tvar ballChosenColumn = getColumnByElemID(ballChosen.id);\n\t\t\t\t\tvar ballChosenColor = self.ballColorMatrix[ballChosenRow][ballChosenColumn];\n\n\t\t\t\t\tlastBallChosen.ball = ballChosen;\n\t\t\t\t\tlastBallChosen.previd = [ballChosenRow, ballChosenColumn];\n\n\t\t\t\t\tself.ballMatrix[ballChosenRow][ballChosenColumn] = false;\n\t\t\t\t\tself.ballColorMatrix[ballChosenRow][ballChosenColumn] = '';\n\n\t\t\t\t\tballChosen.id = '' + ballPath[ballPathElem][0] + '-' + ballPath[ballPathElem][1];\n\n\t\t\t\t\tballChosenRow = getRowByElemID(ballChosen.id);\n\t\t\t\t\tballChosenColumn = getColumnByElemID(ballChosen.id);\n\t\t\t\t\tself.ballMatrix[ballChosenRow][ballChosenColumn] = true;\n\t\t\t\t\tself.ballColorMatrix[ballChosenRow][ballChosenColumn] = ballChosenColor;\n\n\t\t\t\t\tlastBallChosen.newid = [ballChosenRow, ballChosenColumn];\n\n\t\t\t\t\tballChosen = 0;\n\t\t\t\t\tballPath.pop();\n\t\t\t\t\tcheckForDelete();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tballPath.pop()\n\t\t\t\t\tballMoveTimer = RAF(animateMove);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tballMoveTimer = RAF(animateMove);\n\t\t\t}\n\t\t}\n\t}\n\t//// отменить шаг\n\tself.undoStep = function () {\n\t\tif (lastBallsDeleted != 0) {\n\t\t\tfor (var i = 0; i < lastBallsDeleted.length; i++) {\n\t\t\t\tlastBallsDeleted[i].setAttribute('r', activeView.ballR);\n\t\t\t\tvar ballRow = getRowByElemID(lastBallsDeleted[i].id);\n\t\t\t\tvar ballColumn = getColumnByElemID(lastBallsDeleted[i].id);\n\t\t\t\tself.ballColorMatrix[ballRow][ballColumn] = lastBallsDeleted[i].getAttribute('fill');\n\t\t\t\tself.ballMatrix[ballRow][ballColumn] = true;\n\t\t\t\tactiveView.appendElem(lastBallsDeleted[i]);\n\t\t\t};\n\t\t\tself.currentScore -= lastStepScore;\n\t\t\tlastBallsDeleted = 0\n\t\t}\n\t\tif (lastBallsAppeared != 0) {\n\t\t\tfor (var i = 0; i < lastBallsAppeared.length; i++) {\n\t\t\t\tvar ballRow = getRowByElemID(lastBallsAppeared[i].id);\n\t\t\t\tvar ballColumn = getColumnByElemID(lastBallsAppeared[i].id);\n\t\t\t\tself.ballColorMatrix[ballRow][ballColumn] = '';\n\t\t\t\tself.ballMatrix[ballRow][ballColumn] = false;\n\t\t\t\tactiveView.setR(lastBallsAppeared[i], 0)\n\t\t\t\tactiveView.removeElem(lastBallsAppeared[i]);\n\t\t\t}\n\t\t\tlastBallsAppeared = 0\n\t\t}\n\t\tif (lastBallChosen.ball != 0) {\n\t\t\tlastBallChosen.ball.id = '' + lastBallChosen.previd[0] + '-' + lastBallChosen.previd[1];\n\n\t\t\tself.ballColorMatrix[lastBallChosen.previd[0]][lastBallChosen.previd[1]] = lastBallChosen.ball.getAttribute('fill');\n\t\t\tself.ballMatrix[lastBallChosen.previd[0]][lastBallChosen.previd[1]] = true;\n\t\t\tactiveView.setCY(lastBallChosen.ball, activeView.centerPointsArray[lastBallChosen.previd[0]][lastBallChosen.previd[1]][1]);\n\t\t\tactiveView.setCX(lastBallChosen.ball, activeView.centerPointsArray[lastBallChosen.previd[0]][lastBallChosen.previd[1]][0]);\n\n\t\t\tself.ballColorMatrix[lastBallChosen.newid[0]][lastBallChosen.newid[1]] = '';\n\t\t\tself.ballMatrix[lastBallChosen.newid[0]][lastBallChosen.newid[1]] = false;\n\t\t\tlastBallChosen = { \"ball\": 0, \"previd\": [], \"newid\": [] };\n\t\t}\n\t}\n\t//проверить ряд на удаление\n\tfunction checkForDelete() {\n\t\tvar row = checkRowForDelete();\n\t\tvar column;\n\t\tvar diag;\n\t\tif (!row) {\n\t\t\tcolumn = checkColumnForDelete();\n\t\t}\n\t\tif (!row && !column) {\n\t\t\tdiag = checkDiagonalForDelete();\n\t\t}\n\t\tif (row) {\n\t\t\tanimateDelete();\n\t\t}\n\t\telse if (column) {\n\t\t\tanimateDelete();\n\t\t}\n\t\telse if (diag) {\n\t\t\tanimateDelete();\n\t\t}\n\t\telse {\n\t\t\tself.createAndPlaceNextBalls();\n\t\t}\n\t}\n\t//проверить ряд на удаление\n\tfunction checkAppearanceForDelete() {\n\t\tvar row = checkRowForDelete();\n\t\tvar column;\n\t\tvar diag;\n\t\tif (!row) {\n\t\t\tcolumn = checkColumnForDelete();\n\t\t}\n\t\tif (!row && !column) {\n\t\t\tdiag = checkDiagonalForDelete();\n\t\t}\n\t\tif (row) {\n\t\t\tanimateDelete();\n\t\t}\n\t\telse if (column) {\n\t\t\tanimateDelete();\n\t\t}\n\t\telse if (diag) {\n\t\t\tanimateDelete();\n\t\t}\n\t\telse {\n\t\t\tvar emptyCells = checkEmptyCells();\n\t\t\tif (emptyCells < newBallsNumber) {\n\t\t\t\tself.switchToState(\"Gameover\");\n\t\t\t}\n\t\t}\n\t}\n\n\t//запомнить ряд шаров одного цвета\n\t//ф-я проверить строку\n\tfunction checkRowForDelete() {\n\t\tvar idForDelete = [];\n\t\t//var color = '';\n\t\tfor (var i = 0; i < self.ballMatrix.length; i++) {\n\t\t\tvar count = 0;\n\t\t\tfor (var j = 0; j < self.ballMatrix[i].length; j++) {\n\t\t\t\tvar id = '';\n\t\t\t\tif (self.ballMatrix[i][j] && self.ballColorMatrix[i][j]) {\n\t\t\t\t\tif (j > 0 && self.ballColorMatrix[i][j] === self.ballColorMatrix[i][j - 1]) {//i строка, j - столбец\n\t\t\t\t\t\tid = '' + i + '-' + j;\n\t\t\t\t\t\tidForDelete.push(id);\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (count >= self.deleteMinimum) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tidForDelete = [];\n\t\t\t\t\t\t\tcount = 0;\n\t\t\t\t\t\t\tid = '' + i + '-' + j;\n\t\t\t\t\t\t\tidForDelete.push(id);\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (count >= self.deleteMinimum) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (count >= self.deleteMinimum) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tidForDelete = [];\n\t\t\t}\n\t\t}\n\t\tif (idForDelete.length >= self.deleteMinimum) {\n\t\t\tself.deleteBallsArray = [];\n\t\t\tself.deleteBallsRadiusArray = [];\n\t\t\tfor (var i = 0; i < idForDelete.length; i++) {\n\t\t\t\tvar element = document.getElementById(idForDelete[i]);\n\t\t\t\tself.deleteBallsArray.push(element);\n\t\t\t\tself.deleteBallsRadiusArray.push(ballR);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse {\n\t\t\treturn false;\n\t\t}\n\t}\n\t//проверить столбец \n\tfunction checkColumnForDelete() {\n\t\tvar idForDelete = [];\n\t\tfor (var i = 0; i < self.ballMatrix.length; i++) {\n\t\t\tvar count = 0;\n\t\t\tfor (var j = 0; j < self.ballMatrix[i].length; j++) {\n\t\t\t\tvar id = '';\n\t\t\t\tif (self.ballColorMatrix[j][i]) {\n\t\t\t\t\tif (j > 0 && self.ballColorMatrix[j][i] === self.ballColorMatrix[j - 1][i]) {//i столбец, j - строка\n\t\t\t\t\t\tid = '' + j + '-' + i;\n\t\t\t\t\t\tidForDelete.push(id);\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (count >= self.deleteMinimum) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tidForDelete = [];\n\t\t\t\t\t\t\tcount = 0;\n\t\t\t\t\t\t\tid = '' + j + '-' + i;\n\t\t\t\t\t\t\tidForDelete.push(id);\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (count >= self.deleteMinimum) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (count >= self.deleteMinimum) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tidForDelete = [];\n\t\t\t}\n\t\t}\n\t\tif (idForDelete.length >= self.deleteMinimum) {\n\t\t\tself.deleteBallsArray = [];\n\t\t\tself.deleteBallsRadiusArray = [];\n\t\t\tfor (var i = 0; i < idForDelete.length; i++) {\n\t\t\t\tvar element = document.getElementById(idForDelete[i]);\n\t\t\t\tself.deleteBallsArray.push(element);\n\t\t\t\tself.deleteBallsRadiusArray.push(activeView.ballR);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse {\n\t\t\treturn false;\n\t\t}\n\t}\n\t//проверить диагональ \n\tfunction checkDiagonalForDelete() {\n\t\tvar idForDelete = [];\n\t\t//сверху вниз\n\t\tfor (var i = 0; i < self.cellsNum; i++) {\n\t\t\tvar count = 0;\n\t\t\tfor (var j = 0; j < self.cellsNum; j++) {\n\t\t\t\tvar rowNum = j;\n\t\t\t\tvar columnNum = (i + j * (self.cellsNum - 1)) % self.cellsNum;\n\t\t\t\tvar id = '';\n\t\t\t\tif (self.ballColorMatrix[rowNum][columnNum]) {\n\t\t\t\t\tif (rowNum - 1 >= 0 && columnNum + 1 < self.cellsNum && self.ballColorMatrix[rowNum][columnNum] === self.ballColorMatrix[rowNum - 1][columnNum + 1]) {\n\t\t\t\t\t\tid = '' + rowNum + '-' + columnNum;\n\t\t\t\t\t\tidForDelete.push(id);\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (count >= self.deleteMinimum) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tidForDelete = [];\n\t\t\t\t\t\t\tcount = 0;\n\t\t\t\t\t\t\tid = '' + rowNum + '-' + columnNum;\n\t\t\t\t\t\t\tidForDelete.push(id);\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (count >= self.deleteMinimum) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (count >= self.deleteMinimum) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tidForDelete = [];\n\t\t\t}\n\t\t}\n\t\t//снизу вверх\n\t\tif (idForDelete.length < self.deleteMinimum) {\n\t\t\tfor (var i = 0; i < self.cellsNum; i++) {\n\t\t\t\tvar count = 0;\n\t\t\t\tfor (var j = self.cellsNum - 1; j >= 0; j--) {\n\t\t\t\t\tvar rowNum = j;\n\t\t\t\t\tvar columnNum = (self.cellsNum * (self.cellsNum - 1) - 1 + i - (self.cellsNum - j) * (self.cellsNum - 1)) % self.cellsNum;\n\t\t\t\t\tvar id = '';\n\t\t\t\t\tif (self.ballColorMatrix[rowNum][columnNum]) {\n\t\t\t\t\t\tif (rowNum + 1 < self.cellsNum && columnNum - 1 >= 0 && self.ballColorMatrix[rowNum][columnNum] === self.ballColorMatrix[rowNum + 1][columnNum - 1]) {\n\t\t\t\t\t\t\tid = '' + rowNum + '-' + columnNum;\n\t\t\t\t\t\t\tidForDelete.push(id);\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (count >= self.deleteMinimum) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tidForDelete = [];\n\t\t\t\t\t\t\t\tcount = 0;\n\t\t\t\t\t\t\t\tid = '' + rowNum + '-' + columnNum;\n\t\t\t\t\t\t\t\tidForDelete.push(id);\n\t\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (count >= self.deleteMinimum) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (count >= self.deleteMinimum) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tidForDelete = [];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//справа налево\n\t\tif (idForDelete.length < self.deleteMinimum) {\n\t\t\tfor (var i = 0; i < self.cellsNum; i++) {\n\t\t\t\tvar count = 0;\n\t\t\t\tfor (var j = 0; j < self.cellsNum; j++) {\n\t\t\t\t\tvar rowNum = j;\n\t\t\t\t\tvar columnNum = (i + j * (self.cellsNum + 1)) % self.cellsNum;\n\n\t\t\t\t\tvar id = '';\n\t\t\t\t\tif (self.ballColorMatrix[rowNum][columnNum]) {\n\t\t\t\t\t\tif (rowNum - 1 >= 0 && columnNum - 1 >= 0 && self.ballColorMatrix[rowNum][columnNum] === self.ballColorMatrix[rowNum - 1][columnNum - 1]) {\n\t\t\t\t\t\t\tid = '' + rowNum + '-' + columnNum;\n\t\t\t\t\t\t\tidForDelete.push(id);\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (count >= self.deleteMinimum) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tidForDelete = [];\n\t\t\t\t\t\t\t\tcount = 0;\n\t\t\t\t\t\t\t\tid = '' + rowNum + '-' + columnNum;\n\t\t\t\t\t\t\t\tidForDelete.push(id);\n\t\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (count >= self.deleteMinimum) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (count >= self.deleteMinimum) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tidForDelete = [];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//слева направо\n\t\tif (idForDelete.length < self.deleteMinimum) {\n\t\t\tfor (var i = 0; i < self.cellsNum; i++) {\n\t\t\t\tvar count = 0;\n\t\t\t\tfor (var j = self.cellsNum - 1; j >= 0; j--) {\n\t\t\t\t\tvar rowNum = j;\n\t\t\t\t\tvar columnNum = (self.cellsNum * (self.cellsNum - 1) + 1 + i - (self.cellsNum - j) * (self.cellsNum + 1)) % self.cellsNum;\n\n\t\t\t\t\tvar id = '';\n\t\t\t\t\tif (self.ballColorMatrix[rowNum][columnNum]) {\n\t\t\t\t\t\tif (rowNum + 1 < self.cellsNum && columnNum + 1 < self.cellsNum && self.ballColorMatrix[rowNum][columnNum] === self.ballColorMatrix[rowNum + 1][columnNum + 1]) {\n\t\t\t\t\t\t\tid = '' + rowNum + '-' + columnNum;\n\t\t\t\t\t\t\tidForDelete.push(id);\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (count >= self.deleteMinimum) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tidForDelete = [];\n\t\t\t\t\t\t\t\tcount = 0;\n\t\t\t\t\t\t\t\tid = '' + rowNum + '-' + columnNum;\n\t\t\t\t\t\t\t\tidForDelete.push(id);\n\t\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (count >= self.deleteMinimum) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (count >= self.deleteMinimum) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tidForDelete = [];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (idForDelete.length >= self.deleteMinimum) {\n\t\t\tfor (var i = 0; i < idForDelete.length; i++) {\n\t\t\t\tvar element = document.getElementById(idForDelete[i]);\n\t\t\t\tself.deleteBallsArray.push(element);\n\t\t\t\tself.deleteBallsRadiusArray.push(ballR);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse {\n\t\t\treturn false;\n\t\t}\n\t}\n\tself.updateModel = function () {\n\t\tplayerName = activeView.playerName;\n\t\tcellW = activeView.cellW;\n\t\tballR = activeView.ballR;\n\t\tballMovingSpeed = activeView.ballMovingSpeed;\n\t}\n\tself.showHighScore = function () {\n\t\tif (activeView) {\n\t\t\tactiveView.showHighScore();\n\t\t}\n\t}\n\tself.closeHighScore = function () {\n\t\tif (activeView) {\n\t\t\tactiveView.closeHighScore();\n\t\t}\n\t}\n\tself.undo = function () {\n\t\tif (activeView) {\n\t\t\tactiveView.undo();\n\t\t}\n\t}\n\tself.showSettings = function () {\n\t\tif (activeView) {\n\t\t\tactiveView.showCustomSettings();\n\t\t}\n\t}\n\tself.getSettings = function () {\n\t\tvar lastCellsNum = self.cellsNum;\n\t\tvar lastNumOfColors = self.numOfColors;\n\t\tvar lastDeleteMinimum = self.deleteMinimum;\n\t\tif (activeView) {\n\t\t\tself.cellsNum = activeView.getSettingsValues('cellsnumber');\n\t\t\tself.numOfColors = activeView.getSettingsValues('colorsnumber');\n\t\t\tself.deleteMinimum = activeView.getSettingsValues('minimumremoval');\n\t\t\tself.totalCellsNum = self.cellsNum * self.cellsNum;\n\t\t\tif (self.cellsNum != lastCellsNum || self.numOfColors != lastNumOfColors || self.deleteMinimum != lastDeleteMinimum) {\n\t\t\t\tactiveView.deleteAllBalls()\n\t\t\t\tself.clearArrForNewGame();\n\t\t\t\tactiveView.updateCurrentScore(self.currentScore);\n\t\t\t\tself.createPlayField();\n\t\t\t}\n\t\t\tactiveView.closeCustomSettings();\n\t\t}\n\t}\n\tself.changeAudio = function () {\n\t\tactiveView.changeAudio();\n\t}\n\tself.befUnload = function (EO) {\n\t\tEO = EO || window.event;\n\t\tsaveModel.ballMatrix = self.ballMatrix;\n\t\tsaveModel.ballColorMatrix = self.ballColorMatrix;\n\t\tsaveModel.numOfColors = self.numOfColors;\n\t\tsaveModel.cellsNum = self.cellsNum;\n\t\tsaveModel.deleteMinimum = self.deleteMinimum;\n\t\tsaveModel.currentScore = self.currentScore;\n\t\tsaveModel.gameBallColors = self.gameBallColors;\n\t\tvar save = JSON.stringify(saveModel);\n\t\twindow.localStorage.setItem(locStorageName, save);\n\t\t//после сохранения модели обнуляем ее\n\t\tsaveModel = { \"ballMatrix\": 0, \"ballColorMatrix\": 0, \"numOfColors\": 0, \"deleteMinimum\": 0, \"cellsNum\": 0, \"currentScore\": 0, \"gameBallColors\": 0 };\n\t}\n\tself.tStart = function (EO) {\n\t\tEO = EO || window.event;\n\t\tstartSwipe = EO.changedTouches[0];\n\t}\n\tself.tEnd = function (EO) {\n\t\tEO = EO || window.event;\n\t\tendSwipe = EO.changedTouches[0];\n\t\tvar xAbs = Math.abs(startSwipe.pageX - endSwipe.pageX);\n\t\tvar yAbs = Math.abs(startSwipe.pageY - endSwipe.pageY);\n\t\tif (xAbs > 20 || yAbs > 20) {\n\t\t\tif (xAbs > yAbs) {\n\t\t\t\tif (endSwipe.pageX < startSwipe.pageX) {//свайп влево\n\t\t\t\t\tself.showHighScore();\n\t\t\t\t}\n\t\t\t\telse {//свайп вправо\n\t\t\t\t\tself.showSettings();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (endSwipe.pageY < startSwipe.pageY) {//свайп вверх\n\t\t\t\t\t//self.start();\n\t\t\t\t}\n\t\t\t\telse {//свайп вниз\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tself.closeGameOver = function () {\n\t\tactiveView.closeGameOver();\n\t}\n}","'use strict'\n\nexport function LinesView() {\n\tvar self = this;\n\tvar activeModel = null;\n\n\tvar clickAudio;\n\tvar clickAudio2;\n\tvar loadImg;\n\tvar loadImg2;\n\n\tvar svgW;\n\tself.cellW;\n\tself.ballR;\n\tvar groupID = 'innerGroup';\n\tvar cellID = 'cell';\n\tvar ballID = 'ball';\n\tself.ballMovingSpeed;\n\tself.centerPointsArray = [];//save center points coordinate of cells\n\tself.playerName;\n\n\tvar recordsTableArray;//из Model подгружается по надобности\n\tvar cellsNum;\n\tvar totalCellsNum;\n\tvar ballMatrix;\n\tvar ballColorMatrix;\n\tvar gameBallColors;\n\tvar currentScore;\n\tvar newBallsArray = [];\n\tvar newBallsRadiusArray = [];\n\n\t//находим поле, с которым работаем\n\tvar svgElem = document.getElementById('playfield');\n\tvar nameSpace = 'http://www.w3.org/2000/svg';\n\tvar linkNS = 'http://www.w3.org/1999/xlink';\n\tsvgElem.setAttribute('xmlns', nameSpace);\n\tsvgElem.setAttribute('xmlns:xlink', linkNS);\n\n\t//подгружаем img/audio\n\tfunction loadMultimedia() {\n\t\tclickAudio = new Audio(\"sounds/bensound-theelevatorbossanova.mp3\");\n\t\tclickAudio2 = new Audio(\"sounds/ice-block-drop-02.mp3\");\n\t\tloadImg = new Image(\"img/BUTTON-sound-on.png\");\n\t\tloadImg2 = new Image(\"img/BUTTON-sound-off.png\");\n\t}\n\tloadMultimedia()\n\n\tself.bindModel = function (model) {\n\t\tactiveModel = model;\n\t}\n\tself.updateRecordsTableDOM = function () {\n\t\trecordsTableArray = activeModel.recordsTableArray;\n\t\tvar updInnerHtml = '';\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\tupdInnerHtml += recordsTableArray[i][0] + ' ' + recordsTableArray[i][1] + '<br>'\n\t\t}\n\t\tvar elem = document.getElementById('insertupdatedrecords');\n\t\telem.innerHTML = updInnerHtml;\n\t\tvar elem2 = document.getElementById('inserthighscore');\n\t\telem2.innerHTML = recordsTableArray[0][0];\n\t}\n\t//сработает при изменении размеров экрана\n\tself.resizeField = function () {\n\t\tcellsNum = activeModel.cellsNum;\n\t\ttotalCellsNum = activeModel.totalCellsNum;\n\t\tballMatrix = activeModel.ballMatrix\n\t\tballColorMatrix = activeModel.ballColorMatrix;\n\t\tself.createPlayField();\n\t\tself.deleteAllBalls();\n\t\tself.placeSavedBalls();\n\t}\n\t//ф-я рисуем поле\n\tself.createPlayField = function () {\n\t\tgetActualData();\n\t\t//cellsNum = getSettingsValues('cellsnumber');\n\t\t//numOfColors = getSettingsValues('colorsnumber');\n\t\t//deleteMinimum = getSettingsValues('minimumremoval');\n\n\t\t//cell pattern (symbol)\n\t\t//заменить старый паттерн на новый\n\t\tvar cellElem = document.getElementById(cellID);\n\t\tvar cellElemNew = document.createElementNS(nameSpace, 'symbol');\n\t\tif (cellElem) {\n\t\t\tsvgElem.replaceChild(cellElemNew, cellElem);\n\t\t}\n\t\telse {\n\t\t\tsvgElem.appendChild(cellElemNew);\n\t\t}\n\t\tcellElemNew.setAttribute('id', cellID);\n\t\tvar rectElem = document.createElementNS(nameSpace, 'rect');\n\t\trectElem.setAttribute('x', 0);\n\t\trectElem.setAttribute('y', 0);\n\t\trectElem.setAttribute('width', self.cellW);\n\t\trectElem.setAttribute('height', self.cellW);\n\t\trectElem.setAttribute('fill', '#BFB2A3');\n\t\tcellElemNew.appendChild(rectElem);\n\t\tvar rectElem2 = document.createElementNS(nameSpace, 'rect');\n\t\trectElem2.setAttribute('x', self.cellW * 0.05);\n\t\trectElem2.setAttribute('y', self.cellW * 0.05);\n\t\trectElem2.setAttribute('width', self.cellW * 0.9);\n\t\trectElem2.setAttribute('height', self.cellW * 0.9);\n\t\trectElem2.setAttribute('fill', '#D9D0C1');\n\t\tcellElemNew.appendChild(rectElem2);\n\t\t//playfield creation (group)\n\t\t//заменить старую группу клеток на новую\n\t\tvar groupElem = document.getElementById(groupID);\n\t\tvar groupElemNew = document.createElementNS(nameSpace, 'g');\n\t\tif (groupElem) {\n\t\t\tsvgElem.replaceChild(groupElemNew, groupElem);\n\t\t}\n\t\telse {\n\t\t\tsvgElem.appendChild(groupElemNew);\n\t\t}\n\t\tgroupElemNew.setAttribute('id', groupID);\n\t\tvar bgElem = document.createElementNS(nameSpace, 'rect');\n\t\tbgElem.setAttribute('x', 0);\n\t\tbgElem.setAttribute('y', 0);\n\t\tbgElem.setAttribute('width', svgW);\n\t\tbgElem.setAttribute('height', svgW);\n\t\tbgElem.setAttribute('fill', '#D9D0C1');\n\t\tgroupElemNew.appendChild(bgElem);\n\t\t//размещаем клетки и запоминаем центры\n\t\tvar coorX = 0;\n\t\tvar coorY = 0;\n\t\tself.centerPointsArray = [];\n\t\tvar centerPointX;\n\t\tvar centerPointY;\n\t\tfor (var i = 0; i < cellsNum; i++) {\n\t\t\tself.centerPointsArray[i] = [];\n\t\t\tfor (var j = 0; j < cellsNum; j++) {\n\t\t\t\tcoorY = self.cellW * i;\n\t\t\t\tcoorX = self.cellW * j;\n\t\t\t\tgroupElemNew.insertAdjacentHTML('beforeend', '<use xlink:href=\"#cell\" x=' + coorX + ' y=' + coorY + ' />');\n\t\t\t\tself.centerPointsArray[i][j] = [];\n\t\t\t\tcenterPointX = coorX + self.cellW / 2;\n\t\t\t\tcenterPointY = coorY + self.cellW / 2;\n\t\t\t\tself.centerPointsArray[i][j][0] = centerPointX;\n\t\t\t\tself.centerPointsArray[i][j][1] = centerPointY;\n\t\t\t}\n\t\t}\n\t}\n\t//ф-я получить актуальные размеры поля и пересчитать значения нужных переменных\n\tfunction getActualData() {\n\t\tcellsNum = activeModel.cellsNum;\n\t\tsvgW = svgElem.getBoundingClientRect().width;\n\t\tself.cellW = svgW / cellsNum;\n\t\tself.ballR = self.cellW * 0.35;\n\t\tself.ballMovingSpeed = svgW * 0.02;\n\t\tself.updateModel();\n\t}\n\t//ф-я удаляем все шары с поля\n\tself.deleteAllBalls = function () {\n\t\tvar allBalls = document.getElementsByClassName('ball');//коллекция динамическая, поэтому проверяем нулевой элемент, чтобы удалить все\n\t\twhile (allBalls[0]) {\n\t\t\tallBalls[0].parentNode.removeChild(allBalls[0]);\n\t\t}\n\t}\n\t//ф-я размещаем шары в cохраненное положение\n\tself.placeSavedBalls = function () {\n\t\tif (ballMatrix.length !== 0) {\n\t\t\tfor (var i = 0; i < cellsNum; i++) {\n\t\t\t\tfor (var j = 0; j < cellsNum; j++) {\n\t\t\t\t\tif (ballMatrix[i][j]) {\n\t\t\t\t\t\tvar id = '' + i + '-' + j;\n\t\t\t\t\t\tcreateBall(ballColorMatrix[i][j], self.centerPointsArray[i][j][0], self.centerPointsArray[i][j][1], self.ballR, id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//ф-я создаем и размещаем шары  - для использования без анимации\n\tfunction createBall(color, cx, cy, r, id) {\n\t\tvar circleElem = document.createElementNS(nameSpace, 'circle');\n\t\tcircleElem.setAttribute('cx', cx);\n\t\tcircleElem.setAttribute('cy', cy);\n\t\tcircleElem.setAttribute('r', r);\n\t\tcircleElem.setAttribute('fill', color);\n\t\tcircleElem.setAttribute('class', 'ball');\n\t\tcircleElem.setAttribute('id', id);//номер строки + номер столбца\n\t\tsvgElem.appendChild(circleElem);\n\t}\n\t//по кнопке старт начинаем игру\n\tself.start = function () {\n\t\tgameBallColors = activeModel.gameBallColors;\n\t\tballMatrix = activeModel.ballMatrix\n\t\tballColorMatrix = activeModel.ballColorMatrix;\n\t\tcurrentScore = activeModel.currentScore;\n\t\tcellsNum = activeModel.cellsNum;\n\t\ttotalCellsNum = activeModel.totalCellsNum;\n\t\t//clickSoundInit();\n\t\tstartGame();\n\t}\n\t//ф-я инициируем звуки\n\tfunction clickSoundInit() {\n\t\tclickAudio.play(); // запускаем звук\n\t\tclickAudio.pause(); // и сразу останавливаем\n\t\tclickAudio2.play(); // запускаем звук\n\t\tclickAudio2.pause();// и сразу останавливаем\n\t}\n\t//ф-я начинаем игру\n\tfunction startGame() {\n\t\t//удаляем все шары c поля, так как игра начинается заново\n\t\tself.deleteAllBalls();\n\t\t//убираем поле gameover, если игрок не хочет запоминать результаты только что сыгранной игры\n\t\tvar block = document.getElementById('gameovershow');\n\t\tif (block) {\n\t\t\tblock.setAttribute('id', 'gameover');\n\t\t}\n\t}\n\t//ф-я обновить текущий счет\n\tself.updateCurrentScore = function (currentScore) {\n\t\tvar scoreElem = document.getElementById('insertscore');\n\t\tscoreElem.textContent = currentScore;\n\t}\n\t//ф-я создаем и размещаем шары - для использования с анимацией\n\tself.createBallAnim = function (color, cx, cy, r, id) {\n\t\tvar circleElem = document.createElementNS(nameSpace, 'circle');\n\t\tcircleElem.setAttribute('cx', cx);\n\t\tcircleElem.setAttribute('cy', cy);\n\t\tcircleElem.setAttribute('fill', color);\n\t\tcircleElem.setAttribute('class', 'ball');\n\t\tcircleElem.setAttribute('id', id);//номер строки + номер столбца\n\t\tsvgElem.appendChild(circleElem);\n\t\tactiveModel.newBallsArray.push(circleElem);\n\t\tactiveModel.newBallsRadiusArray.push(0);////\n\t\tnewBallsArray = activeModel.newBallsArray;\n\t\tnewBallsRadiusArray = activeModel.newBallsRadiusArray;\n\t}\n\t//ф-я appendChild\n\tself.appendElem = function (elem) {\n\t\tsvgElem.appendChild(elem)\n\t}\n\t//ф-я removeChild\n\tself.removeElem = function (elem) {\n\t\telem.parentNode.removeChild(elem)\n\t}\n\t//ф-я установить cy для шара\n\tself.setCY = function (elem, cy) {\n\t\telem.setAttribute('cy', cy);\n\t}\n\t//ф-я установить cx для шара\n\tself.setCX = function (elem, cx) {\n\t\telem.setAttribute('cx', cx);\n\t}\n\t//ф-я получить cy шара\n\tself.getCY = function (elem) {\n\t\tvar elemCY = parseInt(elem.getAttribute('cy'));\n\t\treturn elemCY;\n\t}\n\t//ф-я получить cx шара\n\tself.getCX = function (elem) {\n\t\tvar elemCX = parseInt(elem.getAttribute('cx'));\n\t\treturn elemCX;\n\t}\n\t//ф-я получить r шара\n\tself.setR = function (elem, r) {\n\t\telem.setAttribute('r', r);\n\t}\n\t//ф-я установить r шара\n\tself.updateBallRadius = function (element, r) {\n\t\telement.setAttribute('r', r);\n\t}\n\t//ф-я вызов звука при нажатии на шар\n\tself.clickBallSound = function () {\n\t\tclickAudio2.currentTime = 0;\n\t\tclickAudio2.play(); // запускаем звук\n\t}\n\t//ф-я вибрация при касании шара\n\tself.vibro = function () {\n\t\tif (navigator.vibrate) { // есть поддержка Vibration API\n\t\t\twindow.navigator.vibrate(50); // вибрация 100мс\n\t\t}\n\t}\n\tself.updateModel = function () {\n\t\tif (activeModel) {\n\t\t\tactiveModel.updateModel();\n\t\t}\n\t}\n\t//ф-я сообщение об окончании игры\n\tself.showGameOver = function () {\n\t\tvar elemScore = document.getElementById('insertgameoverscore');\n\t\telemScore.textContent = 'YOUR SCORE ' + activeModel.currentScore;\n\t\tvar block = document.getElementById('gameover');\n\t\tblock.setAttribute('id', 'gameovershow');\n\t}\n\t//закрыть окно gameover \t\t\n\tself.closeGameOver = function () {\n\t\tvar block = document.getElementById('gameovershow');\n\t\tif (block) {\n\t\t\tblock.setAttribute('id', 'gameover');\n\t\t\tself.playerName = escapeHTML(document.getElementById('playername').value);\n\t\t\tself.updateModel();\n\t\t\tactiveModel.updateRecordsTableServer();\n\t\t\t//по таймеру, так как не успевает записаться сразу\n\t\t\tsetTimeout(activeModel.updateRecordsTableDOM, 500);\n\t\t\t//закомментировать нижние 4, если нужно, чтобы после go не очищалось поле\t\n\t\t\tself.deleteAllBalls();\n\t\t\tactiveModel.clearArrForNewGame();\n\t\t\tself.updateCurrentScore(0);\n\t\t\tself.createPlayField();\n\t\t}\n\t}\n\n\t//ф-я проверки введенного текста\n\tfunction escapeHTML(text) {\n\t\tif (!text) {\n\t\t\treturn text;\n\t\t}\n\t\ttext = text.toString()\n\t\t\t.split(\"&\").join(\"&amp;\")\n\t\t\t.split(\"<\").join(\"&lt;\")\n\t\t\t.split(\">\").join(\"&gt;\")\n\t\t\t.split('\"').join(\"&quot;\")\n\t\t\t.split(\"'\").join(\"&#039;\");\n\t\treturn text;\n\t}\n\tself.showHighScore = function () {\n\t\t//закрыть любое другое окно при нажатии кнопки\n\t\tvar check = document.getElementById('customsettingsshow');\n\t\tif (check) {\n\t\t\tactiveModel.getSettings();\n\t\t}\n\t\tvar block = document.getElementById('highscore');\n\t\tif (block) {\n\t\t\tblock.setAttribute('id', 'highscoreshow');\n\t\t}\n\t}\n\tself.closeHighScore = function () {\n\t\tvar block = document.getElementById('highscoreshow');\n\t\tif (block) {\n\t\t\tblock.setAttribute('id', 'highscore');\n\t\t}\n\t}\n\tself.undo = function () {\n\t\t//закрыть любое другое окно при нажатии кнопки\n\t\tvar check1 = document.getElementById('customsettingsshow');\n\t\tif (check1) {\n\t\t\tself.closeCustomSettings();\n\t\t}\n\t\tvar check2 = document.getElementById('highscoreshow');\n\t\tif (check2) {\n\t\t\tself.closeHighScore();\n\t\t}\n\t\tactiveModel.undoStep();\n\t}\n\tself.showCustomSettings = function () {\n\t\t//закрыть любое другое окно при нажатии кнопки\n\t\tvar check = document.getElementById('highscoreshow');\n\t\tif (check) {\n\t\t\tself.closeHighScore();\n\t\t}\n\t\tvar block = document.getElementById('customsettings');\n\t\tif (block) {\n\t\t\tblock.setAttribute('id', 'customsettingsshow');\n\t\t}\n\t}\n\tself.getSettingsValues = function (elemName) {\n\t\tvar value;\n\t\tvar elemArray = document.getElementsByName(elemName);\n\t\tfor (var i = 0; i < elemArray.length; i++) {\n\t\t\tif (elemArray[i].checked)\n\t\t\t\tvalue = elemArray[i].value;\n\t\t}\n\t\treturn value;\n\t}\n\tself.setSettingsValues = function (elemName, num) {\n\t\tvar elemArray = document.getElementsByName(elemName);\n\t\tfor (var i = 0; i < elemArray.length; i++) {\n\t\t\tif (elemArray[i].value == num)\n\t\t\t\telemArray[i].checked = true;\n\t\t}\n\t}\n\tself.closeCustomSettings = function () {\n\t\tvar block = document.getElementById('customsettingsshow');\n\t\tif (block) {\n\t\t\tblock.setAttribute('id', 'customsettings');\n\t\t}\n\t}\n\tself.changeAudio = function () {\n\t\tvar imgElem = document.getElementById('audioimg');\n\t\tvar imgElemSrc = imgElem.src;\n\t\tconsole.log(imgElemSrc)\n\t\tif (imgElemSrc == \"https://yavi-modern-lines.web.app/img/BUTTON-sound-off.png\" \n\t\t\t\t|| imgElemSrc == \"http://localhost:8080/img/BUTTON-sound-off.png\"\n\t\t\t\t|| imgElemSrc == \"img/BUTTON-sound-off.png\") {\n\t\t\timgElem.src = \"img/BUTTON-sound-on.png\";\n\t\t\tclickAudio.currentTime = 0;\n\t\t\tclickAudio.play();\n\t\t}\n\t\telse {\n\t\t\timgElem.src = \"img/BUTTON-sound-off.png\";\n\t\t\tclickAudio.pause();\n\t\t}\n\t}\n}"],"sourceRoot":""}